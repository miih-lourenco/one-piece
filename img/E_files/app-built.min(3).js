// Englishtown_Tech_Check_UI - 1.9.7 @ 2023-09-21 10:00:44

define("techcheck-ui/utils/browser-check",[],function(){function a(a){var c=a.toLowerCase(),d=window.devicePixelRatio||1,e=/(edge)\/([\w.]+)/.exec(c)||/(chrome)[ \/]([\w.]+)/.exec(c)||/(firefox)[ \/]([\w.]+)/.exec(c)||/version\/([\d|.]+)\s(safari)/.exec(c)||/(webkit)[ \/]([\w.]+)/.exec(c)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(c)||/(?:(msie) ([\d.]+).*)?(trident)\/(\d+)/.exec(c)||/(msie) ([\w.]+)/.exec(c)||[],f=!1,g=null;if("safari"===e[2])e[2]=e[1],e[1]="safari";else if("trident"===e[3]){var h=b[e[4]];e[1]||(e[1]="msie",e[2]=h),f=c.indexOf("compatible")>=0&&e[2]!==h,f&&(g=parseFloat(h))}var i=/(ipad)[\S\s]*os (\d+)_(\d+)/.exec(c)||/(iphone)[\S\s]*os (\d+)_(\d+)/.exec(c)||/(android)[\S\s]*(mobile)/.exec(c)||/(android)[\S\s]*(?!mobile)/.exec(c)||/(kfjwi) /.exec(c)||/(kftt) /.exec(c)||/(kfot) /.exec(c)||[],j=i[1],k="pc";if("android"===j||"kfjwi"===j||"kftt"===j||"kfot"===j){var l=window.screen,m=l.width,n=l.height;k=Math.min(m,n)/d>512?"tablet":"mobile",j="android"}else"ipad"===j?(k="tablet",j="ios"):"iphone"===j&&(k="mobile",j="ios");return{browser:e[1]||"",version:e[2]||"0.0",os:j,device:k,compatibilityMode:f,actualVersionOfCompatibility:g}}var b={4:"8.0",5:"9.0",6:"10.0",7:"11.0",8:"11.0"},c=a(navigator.userAgent);return c.parseUserAgent=a,c}),define("techcheck-ui/utils/cclCacheServer",[],function(){return"http:"===window.location.protocol?"ccl!'configuration.servers.cache'":"ccl!'configuration.servers.cachesecure'"}),define("techcheck-ui/utils/download-urls",[],function(){return{chromeUrlCcl:"ccl!'school.techcheck.ui.chrome.download.url'",firefoxUrlCcl:"ccl!'school.techcheck.ui.firefox.download.url'",ieUrl:"https://support.microsoft.com/products/internet-explorer",flashUrl:"https://get.adobe.com/flashplayer/"}}),define("techcheck-ui/widget/help-screen/keys",[],function(){return{HELP_SCREEN_TROUBLESHOOT:"troubleshoot",HELP_SCREEN_PRIVATE_BROWSING:"private-browsing"}}),define("techcheck-ui/widget/utils/toggle",[],function(){function a(){var a=this.value;this.value=this.count>0,a!==this.value&&this.onchange(this.value)}function b(a){this.onchange=a.onchange,this.count=0,this.value=!1}return b.prototype.push=function(b){var c=this,d=!1,e=!1;b.ensure(function(){e=!0,d&&(c.count-=1,a.call(c))}),e||(d=!0,c.count+=1,a.call(c))},b}),define("troopjs-requirejs/template!techcheck-ui/widget/bottom-bar/bottom-bar.html",[],function(){return function(a){var b='<div class="tck-ui-ft-left">\n\t<button class="btn btn-default tck-ui-ft-troubleshoot"\n\t        data-tracking="troubleshoot"\n\t        data-action="troubleshoot" data-weave="troopjs-ef/blurb/widget"\n\t        data-blurb-id="690415" data-text-en="Having trouble?"></button>\n\t';return a.offline||(b+='\n\t\t<span class="tck-ui-ft-livechat tck-none">\n\t\t\t<span class="tck-ui-help-text">'+a.liveChatLabel+'</span>\n\t\t\t<span data-weave="techcheck-ui/widget/shared/live-chat/main(\'small-button\')"\n\t\t\t      class="tck-ui-livechat-widget" data-delegate="button"></span>\n\t\t</span>\n\t'),b+='\n</div>\n<div class="tck-ui-ft-right">\n\t<a class="tck-ui-ft-link tck-ui-ft-cancel" data-action="cancel">'+a.txt_cancel+'</a>\n\t<button class="btn btn-primary tck-ui-ft-next tck-disabled" data-action="next" data-toggle="tooltip" data-placement="left" data-trigger="manual">'+a.txt_next+'</button>\n\t<button class="btn btn-primary tck-ui-ft-try-again tck-none" data-action="tryagain" data-weave="troopjs-ef/blurb/widget"\n\t        data-blurb-id="690455" data-text-en="Try again"></button>\n</div>'}}),define("techcheck-ui/widget/bottom-bar/main",["when","jquery","poly/array","jquery.gudstrap","troopjs-ef/component/widget","../help-screen/keys","../utils/toggle","template!./bottom-bar.html"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){return"blurb!"+F[a].id}function j(){var a=this,b=a[r].find(y);b.data("title")&&b.tooltip("show")}function k(){this[r].find(y).tooltip("hide")}function l(a){this[r].find(y).tooltip("destroy").data("title",a)}function m(){this[r].find(y).data("title","").tooltip("destroy")}function n(){var a=this,b=!a[v]||a[u].value;a[r].find(y).toggleClass(E,b),a[r].find(z).toggleClass(E,a[u].value)}function o(a){this[r].find(C).text(a)}function p(){var a=this,b=a[r],c=!a[t].value&&!a[w];b.find(A).toggleClass(D,!c);var d=a[w];b.find(B).toggleClass(D,!d)}function q(){var a=this,b=a[r],c=a[x];b.find(z).toggleClass(D,!c);var d=!a[x];b.find(y).toggleClass(D,!d)}var r="$element",s="_translations",t="_troubleshootButtonDisabled",u="_nextButtonForceDisabled",v="_nextButtonEnabled",w="_liveChatButtonEnabled",x="_tryAgainButtonEnabled",y=".tck-ui-ft-next",z=".tck-ui-ft-try-again",A=".tck-ui-ft-troubleshoot",B=".tck-ui-ft-livechat",C=".tck-ui-help-text",D="tck-none",E="tck-disabled",F={CANCEL_BUTTON:{id:"634272",en:"Cancel"},NEXT_BUTTON:{id:"634273",en:"Next"},SKIP_BUTTON:{id:"450011",en:"Skip"},FINISH_BUTTON:{id:"634292",en:"Finish"},DEFAULT_LIVECHAT_LABEL:{id:"690456",en:"None of these worked?"},TROUBLESHOOT_LIVECHAT_LABEL:{id:"690590",en:"Need help?"}};return e.extend(function(){this[s]={},this[w]=!1,this[t]=new g({onchange:p.bind(this)}),this[v]=!1,this[u]=new g({onchange:n.bind(this)})},{"sig/start":function(){var a=this,b=Object.keys(F);return a.query(b.map(i)).then(function(c){b.forEach(function(b,d){var e=c[d];a[s][b]=e&&e.translation||""})}).then(function(){var b=a[r].data("offline");return a.html(h,{txt_cancel:a[s].CANCEL_BUTTON,txt_next:a[s].NEXT_BUTTON,liveChatLabel:a[s].DEFAULT_LIVECHAT_LABEL,offline:b})})},"hub:memory/tech-check/preCheck/finished":function(a){this._modules=a.filter(function(a){return!a.standalone&&!a.passed})},"hub:memory/tech-check/module/active":function(a){var b=this,c=b._modules;if(c&&0!==c.length){b._current_module_id=a;var d=c.find(function(b){return b.id===a}),e=b[r].find(".tck-ui-ft-cancel");e.text(b[s].CANCEL_BUTTON),e.toggle(!d.skippable);var f;f=d.skippable?b[s].SKIP_BUTTON:a===c[c.length-1].id?b[s].FINISH_BUTTON:b[s].NEXT_BUTTON,b[r].find(y).text(f),b[v]=Boolean(d.nextEnabled||d.skippable),n.call(b),m.call(b)}},"hub/tech-check/cancel-button/set":function(a){var b=this;b.query("blurb!"+a).spread(function(a){a&&b[r].find(".tck-ui-ft-cancel").text(a.translation)})},"hub/tech-check/next-button/set":function(a){var b=this;b.query("blurb!"+a).spread(function(a){a&&b[r].find(y).text(a.translation)})},"hub/tech-check/next-button/attach/tooltip":function(a){var b=this;b.query("blurb!"+a).spread(function(a){a&&l.call(b,a.translation)})},"hub/tech-check/next-button/detach/tooltip":function(){var a=this;m.call(a)},"hub/tech-check/next-button/enable":function(a){var b=this;b[v]=Boolean(a),n.call(b)},"hub/tech-check/help-screen/shown":function(b,c){var d=this;d[t].push(b),d[u].push(b),"troubleshoot"===c&&(o.call(d,d[s].TROUBLESHOOT_LIVECHAT_LABEL),a(b).ensure(function(){o.call(d,d[s].DEFAULT_LIVECHAT_LABEL)}))},"hub/tech-check/troubleshoot-button/disable":function(a){this[t].push(a)},"hub/tech-check/livechat-button/enable":function(a){var b=this;b[w]=a,p.call(b)},"hub/tech-check/try-again-button/enable":function(a){var b=this;b[x]=a,q.call(b)},"dom:[data-action=help]/click":function(){this.publish("tech-check/help")},"dom:[data-action=cancel]/click":function(){this.publish("tech-check/cancel")},"dom:[data-action=troubleshoot]/click":function(){this.publish("tech-check/help-screen/show",f.HELP_SCREEN_TROUBLESHOOT)},"dom:[data-action=next]/click":function(){var a=this;a[v]&&!a[u].value&&a.publish("tech-check/trigger/next",a._current_module_id)},"dom:[data-action=tryagain]/click":function(){this.publish("tech-check/check-audio/retry")},"dom:[data-action=next]/mouseover":function(){var a=this;a[v]||a[u].value||j.call(a)},"dom:[data-action=next]/mouseout":function(){k.call(this)},update:function(){var a=this;a._modules&&(a._modules.forEach(function(b){b.id===a._current_module_id&&(a[v]=Boolean(b.nextEnabled))}),n.call(a))}})}),define("techcheck-ui/widget/check-module/base",["jquery","troopjs-utils/merge","troopjs-ef/component/widget"],function(a,b,c){function d(b){return a.extend({},b)}var e="_module_data";return c.extend(function(a,c,d){var f=this;f[e]={id:"",topic:"",passed:void 0,nextEnabled:!1,standalone:!1,reload:void 0},b.call(f[e],f.config||{},d)},{"sig/start":function(){var a=this;if("number"==typeof a[e].topic)return a.query("blurb!"+a[e].topic).spread(function(b){a[e].topic=b&&b.translation})},"hub/tech-check/module/active":function(a){var b=this;a===b[e].id?b.active&&b.active():b.passive&&b.passive()},"hub/tech-check/trigger/next":function(a){var b=this;a===b[e].id&&b.next&&b.next()},publishResult:function(){var a=this;a.publish("tech-check/module/result",d(a[e]))},data:function(b){return b?a.extend(this[e],b):d(this[e])},pass:function(){var a=this;!0!==a[e].passed&&(a[e].passed=!0,a.publishResult())},fail:function(){var a=this;!1!==a[e].passed&&(a[e].passed=!1,a.publishResult())},block:function(){var a=this;a.publish("tech-check/event/module/block",d(a[e]))}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/browser-version/browserVersion.html",[],function(){return function(a){return'<div class="tck-ui-browser-version">\n\t<div class="tck-ui-check-module-title">\n\t\t<div class="tck-ui-main-title">Check Browser Version</div>\n\t\t<div data-weave="troopjs-ef/blurb/widget"\n\t\t     data-blurb-id="702525"\n\t\t     data-text-en="You are using an outdated version of Internet Explorer. The courseware may not work properly on this browser."></div>\n\t</div>\n\t<div class="tck-ui-check-module-body">\n\t\t<div class="tck-ui-main-body">\n\t\t\t<div class="tck-ui-browser-check-browser-options-label"\n\t\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t\t     data-blurb-id="702526" data-text-en="Please use one of the alternative browser below:"></div>\n\t\t\t<div class="tck-ui-browser-check-browser-options">\n\t\t\t\t<div class="tck-ui-browser-check-browser-option">\n\t\t\t\t\t<span class="tck-ui-browser-check-logo-chrome"></span><br/>\n\t\t\t\t\tGoogle<br/>Chrome<br/>\n\t\t\t\t\t<a class="btn tck-ui-browser-check-browser-download"\n\t\t\t\t\t   data-tracking="download-chrome"\n\t\t\t\t\t   target="_blank" href="'+a.chromeUrl+'"\n\t\t\t\t\t   data-weave="troopjs-ef/blurb/widget"\n\t\t\t\t\t   data-blurb-id="702518" data-text-en="Download"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="tck-ui-browser-check-browser-option">\n\t\t\t\t\t<span class="tck-ui-browser-check-logo-firefox"></span><br/>\n\t\t\t\t\tMozilla<br/>Firefox<br/>\n\t\t\t\t\t<a class="btn tck-ui-browser-check-browser-download"\n\t\t\t\t\t   data-tracking="download-chrome"\n\t\t\t\t\t   target="_blank" href="'+a.firefoxUrl+'"\n\t\t\t\t\t   data-weave="troopjs-ef/blurb/widget"\n\t\t\t\t\t   data-blurb-id="702518" data-text-en="Download"></a>\n\t\t\t\t</div>\n\t\t\t\t<div class="tck-ui-browser-check-browser-option">\n\t\t\t\t\t<span class="tck-ui-browser-check-logo-ie"></span><br/>\n\t\t\t\t\tInternet<br/>Explorer&nbsp;11<br/>\n\t\t\t\t\t<a class="btn tck-ui-browser-check-browser-download"\n\t\t\t\t\t   data-tracking="download-chrome"\n\t\t\t\t\t   target="_blank" href="'+a.ieUrl+'"\n\t\t\t\t\t   data-weave="troopjs-ef/blurb/widget"\n\t\t\t\t\t   data-blurb-id="702518" data-text-en="Download"></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="tck-ui-browser-version-footer"\n\t\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t\t     data-blurb-id="702527"\n\t\t\t     data-text-en="Internet Explorer version prior to IE 11 have been retired by Microsoft since January 2016 for security reasons."></div>\n\t\t</div>\n\t</div>\n</div>'}}),define("techcheck-ui/widget/check-module/browser-version/main",["jquery","when","../base","techcheck-ui/utils/browser-check","techcheck-ui/utils/download-urls","template!./browserVersion.html"],function(a,b,c,d,e,f){"use strict";return c.extend({config:{topic:702524,skippable:!0},"sig/start":function(){var a=this,b=!1;if("msie"===d.browser&&parseInt(d.version,10)<11&&(b=!0),b)return a.fail(),a.query(e.chromeUrlCcl,e.firefoxUrlCcl).spread(function(b,c){return a.html(f,{chromeUrl:b&&b.value||"",firefoxUrl:c&&c.value||"",ieUrl:e.ieUrl})});a.pass()},active:function(){var a=this,c=b.promise(function(b){a._whileActiveResolve=b});a.publish("tech-check/troubleshoot-button/disable",c)},passive:function(){var a=this;a._whileActiveResolve&&(a._whileActiveResolve(),a._whileActiveResolve=null)},next:function(){this.pass()}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/check-mic-apparatus/check-mic-apparatus.html",[],function(){return function(a){return'<div class="tck-ui-mic-list tck-hidden"\n     data-weave="techcheck-ui/widget/check-module/check-audio/mic-list/main"></div>\n<div class="tck-ui-timer tck-none" data-weave="techcheck-ui/widget/check-module/check-audio/duration-timer/main"></div>\n<div class="tck-ui-btn" data-toggle="tooltip"\n     data-placement="bottom" data-trigger="manual" data-html="true">\n\t<i class="tck-ui-btn-bg"></i>\n\t<i class="tck-ui-btn-icon"></i>\n</div>'}}),define("techcheck-ui/widget/check-module/check-audio/check-mic-apparatus/main",["jquery","poly","when","troopjs-ef/component/widget","template!./check-mic-apparatus.html"],function(a,b,c,d,e){function f(a){return"blurb!"+_[a].id}function g(){var a=this;a[D]&&clearInterval(a[D]),a[D]=0}function h(){var a=this;g.call(a);var b=a[D]=setInterval(function(){a.publish($,X).then(function(b){a[B].find(N).css("width",b+"%")}).otherwise(function(c){throw b===a[D]&&g.call(a),c})},z)}function i(){var a=this;a[E]=!0,a[G]=!0,a.publish($,Y,!1),w.call(a),h.call(a),clearTimeout(a[H]),a[H]=setTimeout(function(){a[H]=0,a.publish($,Z)},A),a.publish(S)}function j(){var a=this;a[E]=!1,s.call(a),g.call(a)}function k(){var a=this;return clearTimeout(a[H]),a[H]=0,j.call(a),a.publish($,Z)}function l(){var a=this;a[F]=!0,a.publish($,V),x.call(a),a.publish(T)}function m(){var a=this;a[F]=!1,s.call(a),u.call(a)}function n(){var a=this;v.call(a),a.publish(U)}function o(){var a=this;return m.call(a),a.publish($,W)}function p(a,b){a.tooltip("destroy").data("title",b).tooltip("show")}function q(a){a.tooltip("hide")}function r(){var a=this;a[B].find(P).removeClass(I),a.publish(Q)}function s(){var a=this;a[B].find(P).addClass(I),a.publish(R)}function t(a,b){a.toggleClass(J,J===b),a.toggleClass(K,K===b),a.toggleClass(L,L===b),a.toggleClass(M,M===b)}function u(){var a=this,b=a[B].find(O);p(b,a[G]?a[C].TOOLTIP_RECORD_AGAIN:a[C].TOOLTIP_RECORD),t(b,J)}function v(){var a=this,b=a[B].find(O);p(b,a[G]?a[C].TOOLTIP_RECORD_AGAIN:a[C].TOOLTIP_RECORD),t(b,K)}function w(){var a=this,b=a[B].find(O);p(b,"<p>"+a[C].TOOLTIP_RECORDING+'</p><div class="tck-ui-progress"><div class="tck-ui-progress-fg"></div></div>'),t(b,L)}function x(){var a=this,b=a[B].find(O);p(b,a[C].TOOLTIP_PLAYBACK),t(b,M)}function y(){var a=this,b=[];return a[E]&&b.push(k.call(a)),a[F]&&b.push(o.call(a)),c.all(b)}var z=100,A=5e3,B="$element",C="_translations",D="_micActivityInterval",E="_inRecording",F="_inPlayback",G="_hasRecordedOnce",H="_recordingTimeout",I="tck-none",J="tck-ui-btn-record tck-ui-mic-record",K="tck-ui-btn-record-nosound tck-ui-mic-record-nosound",L="tck-ui-btn-recording tck-ui-mic-recording",M="tck-ui-btn-stop tck-ui-mic-stop",N=".tck-ui-progress-fg",O=".tck-ui-btn",P=".tck-ui-timer",Q="tech-check/duration-timer/restart",R="tech-check/duration-timer/stop",S="tech-check/check-mic-apparatus/recording",T="tech-check/check-mic-apparatus/playback",U="tech-check/check-mic-apparatus/no-sound",V="startTechCheckPlayback",W="stopTechCheckPlayback",X="getMicActivity",Y="startTechCheckRecording",Z="stopTechCheckRecording",$="tech-check/recorder/execute",_={TOOLTIP_RECORD:{id:"634286",en:"Click the button to test speakers and microphone"},TOOLTIP_RECORDING:{id:"634288",en:"Your microphone"},TOOLTIP_PLAYBACK:{id:"690426",en:"We are playing your recording for you"},TOOLTIP_RECORD_AGAIN:{id:"634304",en:"Click the button to try again"}};return d.extend(function(){this[C]={},this[E]=!1,this[F]=!1,this[G]=!1,this[H]=0},{"sig/start":function(){var a=this;this[G]=!1;var b=Object.keys(_);return a.query(b.map(f)).then(function(c){b.forEach(function(b,d){var e=c[d];a[C][b]=e&&e.translation||""})}).then(function(){return a.html(e)}).then(function(){a.publish("tech-check/duration-timer/total-time",A/1e3),u.call(a)})},"sig/stop":function(){var a=this;y.call(a),q(a[B].find(O))},"hub/tech-check/recorder/recording":function(a,b,c){var d=this;if(d[E])switch(a){case"START":r.call(d);break;case"COMPLETE":j.call(d),c>0?l.call(d):n.call(d)}},"hub/tech-check/recorder/playback":function(a){var b=this;if(b[F])switch(a){case"START":r.call(b);break;case"COMPLETE":m.call(b)}},"hub/tech-check/cancel/clean":function(){var a=this;return y.call(a)},"dom:.tck-ui-mic-record,.tck-ui-btn-record-nosound/click":function(){var a=this;a[E]||a[F]||i.call(a)},"dom:.tck-ui-mic-stop/click":function(){var a=this;y.call(a)}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/check-mic-speaker/check-mic-speaker.html",[],function(){return function(a){return'<div class="tck-ui-check-module-title">\n    <div class="tck-ui-main-title" data-weave="troopjs-ef/blurb/widget"\n         data-blurb-id="634285" data-text-en="Check if your audio works"></div>\n</div>\n\n<div class="tck-ui-check-module-body">\n    <div class="tck-ui-main-body">\n        <div class="tck-ui-speaker-mic-btn-area"\n             data-weave="techcheck-ui/widget/check-module/check-audio/check-mic-apparatus/main"></div>\n        <div class="tck-ui-ca-footer">\n            <div class="tck-ui-mic-hint tck-none" data-weave="troopjs-ef/blurb/widget"\n                 data-blurb-id="690428" data-text-en="Speak in the microphone for few seconds"></div>\n            <div class="tck-ui-mic-no-sound tck-none" data-weave="troopjs-ef/blurb/widget"\n                 data-blurb-id="690427" data-text-en="We did not detect any sound. Make sure your microphone is plugged in correctly and try again."></div>\n            <div class="tck-ui-check-audio-action tck-ui-mic-action tck-none"\n                 data-weave="techcheck-ui/widget/check-module/check-audio/yes-no-question/main"\n                 data-question-blurb-id="634301" data-question-text-en="Can you hear sound from your speakers?"></div>\n        </div>\n        <div class="tck-ui-ca-redirection-message-container tck-hidden">\n            <span class="tck-ui-check-audio-redirection-message"\n                 data-weave="troopjs-ef/blurb/widget" data-blurb-id="690429"\n                 data-text-en="We\'re sorry to hear that. Let\'s check what the problem is."></span>\n            <span class="tck-ui-check-audio-redirection-message-arrow"></span>\n        </div>\n    </div>\n</div>'}}),define("techcheck-ui/widget/check-module/check-audio/check-mic-speaker/main",["jquery","when","jquery.gudstrap","troopjs-ef/component/widget","poly/array","template!./check-mic-speaker.html"],function(a,b,c,d,e,f){"use strict";function g(a){var b=this[j];b.find(p).toggleClass(k,a!==p),b.find(o).toggleClass(k,a!==o),b.find(n).toggleClass(k,a!==n).toggleClass(m,a===n)}function h(){var a=this[j],b=a.find(r),c=a.find(s),d=c.offset().left+c.outerWidth(!1)/2,e=b.offset().left+b.outerWidth(!1)/2,f=Math.round(d-e),g=parseInt(b.css("right"),10);b.css("right",g-f+"px")}function i(a){this[j].find(q).toggleClass(l,!a)}var j="$element",k="tck-none",l="tck-hidden",m="tck-ui-open",n=".tck-ui-mic-action",o=".tck-ui-mic-no-sound",p=".tck-ui-mic-hint",q=".tck-ui-ca-redirection-message-container",r=".tck-ui-check-audio-redirection-message-arrow",s=".tck-ui-radio-item-no .tck-ui-radio-icon";return d.extend({"sig/start":function(){var a=this;return a._redirectionTimer=0,a.html(f)},"sig/stop":function(){clearTimeout(this._redirectionTimer),this._redirectionTimer=0},"hub/tech-check/check-mic-apparatus/recording":function(){g.call(this,p)},"hub/tech-check/check-mic-apparatus/playback":function(){g.call(this,n),h.call(this)},"hub/tech-check/check-mic-apparatus/no-sound":function(){g.call(this,o)},"hub/tech-check/yes-no-question/yes":function(){this.publish("tech-check/check-audio/succeed-mic-speaker"),clearTimeout(this._redirectionTimer),i.call(this,!1)},"hub/tech-check/yes-no-question/no":function(){var a=this;i.call(a,!0),clearTimeout(a._redirectionTimer),a._redirectionTimer=setTimeout(function(){a._redirectionTimer=0,i.call(a,!1),a.publish("tech-check/check-audio/fail-mic-speaker")},3e3)}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/check-speaker-apparatus/check-speaker-apparatus.html",[],function(){return function(a){return'<div class="tck-ui-timer tck-none" data-weave="techcheck-ui/widget/check-module/check-audio/duration-timer/main"></div>\n<div class="tck-ui-btn tck-ui-btn-play tck-ui-speaker-play" data-toggle="tooltip"\n     data-placement="bottom" data-trigger="manual" data-html="true">\n\t<i class="tck-ui-btn-bg"></i>\n\t<i class="tck-ui-btn-icon"></i>\n</div>\n<audio id="'+a.audioId+'" class="tck-none" src="'+a.audioSrc+'"></audio>'}}),define("techcheck-ui/widget/check-module/check-audio/check-speaker-apparatus/main",["require","jquery","poly","when","logger","troopjs-ef/component/widget","jquery.mediaelement","template!./check-speaker-apparatus.html"],function(a,b,c,d,e,f,g,h){function i(a){return"blurb!"+N[a].id}function j(a){return b("#"+a.id+"_container")}function k(){var a=this,b=a[A]=new g.MediaElement(C,{mode:"auto",success:function(c){if(a[A]===b){c.addEventListener("ended",function(){m.call(a)});var d=function(){q.call(a)};c.addEventListener("play",d),c.addEventListener("seeked",d),c.addEventListener("loadedmetadata",function(){a.publish(J,c.duration)}),a[z]&&(c.play(),v.call(a))}},error:function(a){e.log("Cannot load techcheck audio test file: "+a)}});j(b).css({position:"absolute",right:"100%"})}function l(){var a=this;a[z]=!0,a[A]?(a[A].setCurrentTime(0),v.call(a)):(k.call(a),u.call(a)),a.publish(M)}function m(){var a=this;a[z]=!1,r.call(a),t.call(a)}function n(){var a=this;m.call(a),A&&a[A].pause()}function o(a,b){a.tooltip("destroy").data("title",b).tooltip("show")}function p(a){a.tooltip("hide")}function q(){var a=this;a[x].find(I).removeClass(D),a.publish(K)}function r(){var a=this;a[x].find(I).addClass(D),a.publish(L)}function s(a,b){a.toggleClass(E,E===b),a.toggleClass(F,F===b),a.toggleClass(G,G===b)}function t(){var a=this,b=a[x].find(H);o(b,a[y].TOOLTIP_PLAY),s(b,E)}function u(){var a=this,b=a[x].find(H);p(b),s(b,F)}function v(){var a=this,b=a[x].find(H);p(b),s(b,G)}function w(){var a=this;a[z]&&n.call(a)}var x="$element",y="_translations",z="_isPlaying",A="_soundElement",B=a.toUrl("techcheck-ui/assets/check-speaker.mp3"),C="testsound",D="tck-none",E="tck-ui-btn-play tck-ui-speaker-play",F="tck-ui-btn-loading tck-ui-speaker-loading",G="tck-ui-btn-pause tck-ui-speaker-pause ",H=".tck-ui-btn",I=".tck-ui-timer",J="tech-check/duration-timer/total-time",K="tech-check/duration-timer/restart",L="tech-check/duration-timer/stop",M="tech-check/check-speaker-apparatus/playing",N={TOOLTIP_PLAY:{id:"634298",en:"Click the button to play a test sound"}};return f.extend(function(){this[y]={},this[z]=!1},{"sig/start":function(){var a=this,b=a.html(h,{audioSrc:B,audioId:C}),c=Object.keys(N),e=a.query(c.map(i)).then(function(b){c.forEach(function(c,d){var e=b[d];a[y][c]=e&&e.translation||""})});return d.all([b,e]).then(function(){t.call(a)})},"sig/stop":function(){var a=this;w.call(a),p(a[x].find(H)),delete a[A]},"hub/tech-check/cancel/clean":function(){var a=this;return w.call(a)},"dom:.tck-ui-speaker-play/click":function(){var a=this;a[z]||l.call(a)},"dom:.tck-ui-speaker-pause/click":function(){var a=this;n.call(a)}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/check-speaker-only/check-speaker-only.html",[],function(){return function(a){return'<div class="tck-ui-check-module-title">\n    <div class="tck-ui-main-title" data-weave="troopjs-ef/blurb/widget"\n         data-blurb-id="690449" data-text-en="Let\'s check your speakers"></div>\n</div>\n\n<div class="tck-ui-check-module-body">\n    <div class="tck-ui-main-body">\n        <div class="tck-ui-speaker-mic-btn-area"\n             data-weave="techcheck-ui/widget/check-module/check-audio/check-speaker-apparatus/main"></div>\n        <div class="tck-ui-ca-footer">\n            <div class="tck-ui-check-audio-action tck-ui-mic-action tck-none"\n                 data-weave="techcheck-ui/widget/check-module/check-audio/yes-no-question/main"\n                 data-question-blurb-id="634301" data-question-text-en="Can you hear sound from your speakers?"></div>\n        </div>\n    </div>\n</div>'}}),define("techcheck-ui/widget/check-module/check-audio/check-speaker-only/main",["jquery","poly","when","troopjs-ef/component/widget","template!./check-speaker-only.html"],function(a,b,c,d,e){"use strict";function f(a){var b=this[g];b.find(k).toggleClass(h,a!==k),b.find(j).toggleClass(h,a!==j).toggleClass(i,a===j)}var g="$element",h="tck-none",i="tck-ui-open",j=".tck-ui-mic-action",k=".tck-ui-mic-hint";return d.extend({"sig/start":function(){return this.html(e)},"hub/tech-check/check-speaker-apparatus/playing":function(){f.call(this,j)},"hub/tech-check/yes-no-question/yes":function(){this.publish("tech-check/check-audio/succeed-speaker-only")},"hub/tech-check/yes-no-question/no":function(){this.publish("tech-check/check-audio/fail-speaker-only")}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/duration-timer/duration-timer.html",[],function(){return function(a){return'<span class="tck-ui-timer-countdown"></span><br/>\n<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="691406" data-text-en="secs"></span>'}}),define("techcheck-ui/widget/check-module/check-audio/duration-timer/main",["jquery","poly","when","troopjs-ef/component/widget","template!./duration-timer.html"],function(a,b,c,d,e){function f(a){var b=Math.ceil(a)%60;return Math.floor(a/60)+":"+("00"+b).split("").slice(-2).join("")}function g(){var a,b=this;if(b[l])if(b[m]){var c=(Date.now()-b[k])/1e3,d=Math.max(0,b[l]-c);a=f(d)}else a=f(b[l]);else a=n;b[i].find(j).text(a)}function h(){var a=this;clearInterval(a[m]),a[m]=0}var i="$element",j=".tck-ui-timer-countdown",k="_startTime",l="_totalTime",m="_interval",n="-:--";return d.extend({"sig/start":function(){var a=this;a[k]=Date.now(),a[l]=0,a[m]=0;var b=a[i];return a.html(e).then(function(){b.find(j).text(n)})},"sig/stop":function(){var a=this;h.call(a)},"hub/tech-check/duration-timer/total-time":function(a){var b=this;b[l]=a,g.call(b)},"hub/tech-check/duration-timer/restart":function(){var a=this;a[k]=Date.now(),h.call(a),a[m]=setInterval(g.bind(a),1e3),g.call(a)},"hub/tech-check/duration-timer/stop":function(){var a=this;h.call(a)}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/check-audio.html",[],function(){return function(a){var b='<div class="tck-ui-check-audio">\n\t';return a.widgetName&&(b+='\n\t\t<div data-weave="'+a.widgetName+'"></div>\n\t'),b+="\n</div>"}}),define("techcheck-ui/widget/check-module/check-audio/main",["../base","template!./check-audio.html"],function(a,b){"use strict";function c(a){return this.html(b,{widgetName:a})}return a.extend({config:{topic:634266},active:function(){this.publish("tech-check/next-button/enable",!1),c.call(this,"techcheck-ui/widget/check-module/check-audio/check-mic-speaker/main")},passive:function(){c.call(this,null)},"hub/tech-check/recorder/ready":function(){this.fail()},"hub/tech-check/check-audio/succeed-mic-speaker":function(){this.publish("tech-check/next-button/enable",!0)},"hub/tech-check/check-audio/fail-mic-speaker":function(){this.publish("tech-check/next-button/enable",!1),c.call(this,"techcheck-ui/widget/check-module/check-audio/check-speaker-only/main")},"hub/tech-check/check-audio/succeed-speaker-only":function(){this.publish("tech-check/next-button/enable",!1),c.call(this,"techcheck-ui/widget/check-module/check-audio/troubleshoot-mic/main")},"hub/tech-check/check-audio/fail-speaker-only":function(){this.publish("tech-check/next-button/enable",!1),c.call(this,"techcheck-ui/widget/check-module/check-audio/troubleshoot-speaker/main")},"hub/tech-check/check-audio/retry":function(){this.publish("tech-check/next-button/enable",!1),c.call(this,"techcheck-ui/widget/check-module/check-audio/check-mic-speaker/main")},next:function(){var a=this;c.call(a,null).then(function(){a.pass()})}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/mic-list/mic-list.html",[],function(){return function(a){return'<button class="btn dropdown-title" data-toggle="dropdown" type="button">\n\t<span class="dropdown-title-text"></span>\n\t<i class="dropdown-caret"></i>\n</button>\n<ul class="dropdown-menu" role="menu"></ul>'}}),define("techcheck-ui/widget/check-module/check-audio/mic-list/main",["jquery","poly","jquery.gudstrap","troopjs-ef/component/widget","template!./mic-list.html"],function(a,b,c,d,e){"use strict";function f(){var b=this,c=b[h];b.publish(q,o).then(function(b){var d=b&&b.names&&b.names.length>1;if(d){var e=b.names.slice(),f=b.selectedIndex,g=c.find(n);e.forEach(function(b,d){var e=a("<li class='"+j+"'><a href='javascript:;'>"+b+"</a></li>");d===f&&(e.addClass(k),c.find(m).text(b)),g.append(e)})}c.toggleClass(l,!d)})}function g(a){var b=this,c=b[h].find(m),d=a.text();b.publish(q,p,encodeURIComponent(d)).then(function(){a.siblings().removeClass(k),a.addClass(k),c.text(d),b[i]=d})}var h="$element",i="_currentMicName",j="tck-ui-mic-name",k="active",l="tck-hidden",m=".dropdown-title-text",n=".dropdown-menu",o="getMicList",p="setMic",q="tech-check/recorder/execute";return d.extend({"sig/start":function(){var a=this;return a[h].addClass("dropdown"),a.html(e).then(function(){f.call(a)})},"hub/tech-check/recorder/recording":function(a){var b=this[h].find(".dropdown-title");switch(a){case"START":b.attr("disabled",!0);break;case"COMPLETE":b.removeAttr("disabled")}},"dom:.tck-ui-mic-name/click":function(b){var c=this,d=a(b.currentTarget);g.call(c,d)}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/troubleshoot-mic/troubleshoot-mic.html",[],function(){return function(a){return'<div class="tck-ui-check-module-title">\n\t<div class="tck-ui-main-title" data-weave="troopjs-ef/blurb/widget"\n\t     data-blurb-id="690457" data-text-en="It looks like your microphone is not working!"></div>\n</div>\n\n<div class="tck-ui-check-module-body">\n\t<div class="tck-ui-main-body tck-ui-check-audio-troubleshoot">\n\t\t<div class="tck-ui-speaker-mic-btn-area"\n\t\t     data-weave="techcheck-ui/widget/check-module/check-audio/check-mic-apparatus/main"></div>\n\t\t<div class="tck-ui-ca-troubleshoot-tips">\n\t\t\t<div class="tck-ui-ca-troubleshoot-tip">\n\t\t\t\t<i class="tck-ui-ca-troubleshoot-icon tck-ui-ca-plug"></i>\n\t\t\t    <span class="tck-ui-ca-troubleshoot-tip-message" data-weave="troopjs-ef/blurb/widget"\n\t\t\t          data-blurb-id="690458" data-text-en="Check that the microphone is plugged in."></span>\n\t\t\t</div>\n\t\t\t<div class="tck-ui-ca-troubleshoot-tip">\n\t\t\t\t<i class="tck-ui-ca-troubleshoot-icon tck-ui-ca-mic"></i>\n\t\t\t    <span class="tck-ui-ca-troubleshoot-tip-message" data-weave="troopjs-ef/blurb/widget"\n\t\t\t          data-blurb-id="690459" data-text-en="Check the input level under your system settings."></span>\n\t\t\t</div>\n\t\t\t<div class="tck-ui-ca-troubleshoot-tip">\n\t\t\t\t<i class="tck-ui-ca-troubleshoot-icon tck-ui-ca-headset"></i>\n\t\t\t    <span class="tck-ui-ca-troubleshoot-tip-message" data-weave="troopjs-ef/blurb/widget"\n\t\t\t          data-blurb-id="690460"\n\t\t\t          data-text-en="If you have any, try a different microphone, or a headset with a built-in microphone."></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}}),define("techcheck-ui/widget/check-module/check-audio/troubleshoot-mic/main",["when","troopjs-ef/component/widget","template!./troubleshoot-mic.html"],function(a,b,c){"use strict";return b.extend({"sig/start":function(){var b=this
;return a.all([b.html(c),b.publish("tech-check/livechat-button/enable",!0),b.publish("tech-check/try-again-button/enable",!0)])},"sig/stop":function(){var b=this;return a.all([b.publish("tech-check/livechat-button/enable",!1),b.publish("tech-check/try-again-button/enable",!1)])}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/troubleshoot-speaker/troubleshoot-speaker.html",[],function(){return function(a){return'<div class="tck-ui-check-module-title">\n\t<div class="tck-ui-main-title" data-weave="troopjs-ef/blurb/widget"\n\t     data-blurb-id="690451" data-text-en="It looks like your speakers are not working!"></div>\n</div>\n\n<div class="tck-ui-check-module-body">\n\t<div class="tck-ui-main-body tck-ui-check-audio-troubleshoot">\n\t\t<div class="tck-ui-speaker-mic-btn-area"\n\t\t     data-weave="techcheck-ui/widget/check-module/check-audio/check-speaker-apparatus/main"></div>\n\t\t<div class="tck-ui-ca-troubleshoot-tips">\n\t\t\t<div class="tck-ui-ca-troubleshoot-tip">\n\t\t\t\t<i class="tck-ui-ca-troubleshoot-icon tck-ui-ca-plug"></i>\n\t\t\t    <span class="tck-ui-ca-troubleshoot-tip-message" data-weave="troopjs-ef/blurb/widget"\n\t\t\t           data-blurb-id="690452" data-text-en="Check that your speakers or headphones are plugged in."></span>\n\t\t\t</div>\n\t\t\t<div class="tck-ui-ca-troubleshoot-tip">\n\t\t\t\t<i class="tck-ui-ca-troubleshoot-icon tck-ui-ca-speakers"></i>\n\t\t\t    <span class="tck-ui-ca-troubleshoot-tip-message" data-weave="troopjs-ef/blurb/widget"\n\t\t\t          data-blurb-id="690453" data-text-en="Check your system volume under settings."></span>\n\t\t\t</div>\n\t\t\t<div class="tck-ui-ca-troubleshoot-tip">\n\t\t\t\t<i class="tck-ui-ca-troubleshoot-icon tck-ui-ca-headphones"></i>\n\t\t\t    <span class="tck-ui-ca-troubleshoot-tip-message" data-weave="troopjs-ef/blurb/widget"\n\t\t\t          data-blurb-id="690454" data-text-en="If you have any, try a different set of speakers or headphones."></span>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}}),define("techcheck-ui/widget/check-module/check-audio/troubleshoot-speaker/main",["when","troopjs-ef/component/widget","template!./troubleshoot-speaker.html"],function(a,b,c){"use strict";return b.extend({"sig/start":function(){var b=this;return a.all([b.html(c),b.publish("tech-check/livechat-button/enable",!0),b.publish("tech-check/try-again-button/enable",!0)])},"sig/stop":function(){var b=this;return a.all([b.publish("tech-check/livechat-button/enable",!1),b.publish("tech-check/try-again-button/enable",!1)])}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/check-audio/yes-no-question/yes-no-question.html",[],function(){return function(a){return'<div class="tck-ui-radio-group">\n\t<label class="tck-ui-radio-item tck-ui-radio-item-yes">\n\t\t<input type="radio" name="micConfirm" value="yes"/>\n\t\t<span class="tck-ui-radio-text">\n\t\t\t<span class="tck-ui-radio-icon"></span>\n\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634291" data-text-en="Yes"></span>\n\t\t</span>\n\t</label>\n\t<label class="tck-ui-radio-item tck-ui-radio-item-no">\n\t\t<input type="radio" name="micConfirm" value="no"/>\n\t\t<span class="tck-ui-radio-text">\n\t\t\t<span class="tck-ui-radio-icon"></span>\n\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634473" data-text-en="No"></span>\n\t\t</span>\n\t</label>\n</div>\n<div class="tck-ui-ca-yes-no-question"\n     data-weave="troopjs-ef/blurb/widget" data-blurb-id="'+a.questionBlurbId+'"\n     data-text-en="'+a.questionTextEn+'">\n</div>'}}),define("techcheck-ui/widget/check-module/check-audio/yes-no-question/main",["jquery","troopjs-ef/component/widget","template!./yes-no-question.html"],function(a,b,c){"use strict";function d(a){var b=a.attr("name");this[e].find("input[type=radio][name="+b+"]").not(a).removeClass(f).addClass(g),a.removeClass(g).addClass(f)}var e="$element",f="tck-ui-checked",g="tck-ui-unchecked";return b.extend({"sig/start":function(){var a=this,b=a[e].data();return a.html(c,b)},"dom:input[type=radio]/click":function(b){d.call(this,a(b.currentTarget))},"dom:input[name=micConfirm][value=yes]/click":function(){this.publish("tech-check/yes-no-question/yes")},"dom:input[name=micConfirm][value=no]/click":function(){this.publish("tech-check/yes-no-question/no")}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/chrome-auth/chromeAuth.html",[],function(){return function(a){return'<div class="tck-ui-chrome-auth">\n\t<div class="tck-ui-check-module-title">\n\t\t<div class="tck-ui-main-title" data-weave="troopjs-ef/blurb/widget" data-blurb-id="634281" data-text-en="Authorise Google Chrome"></div>\n\t\t<div class="tck-ui-sub-title" data-weave="troopjs-ef/blurb/widget" data-blurb-id="634282" data-text-en="Google Chrome also needs your permission to rin the Flash plug-in"></div>\n\t</div>\n\t<div class="tck-ui-check-module-body">\n\t\t<div class="tck-ui-main-body">\n\t\t\t<div class="tck-ui-chrome-auth-message"\n\t\t\t     data-weave="troopjs-ef/blurb/widget" data-blurb-id="691561"\n\t\t\t     data-text-en="Please click &quot;Allow&quot; on the message at the top of the screen."></div>\n\t\t\t<div class="tck-ui-chrome-auth-no-bar-message"\n\t\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t\t     data-blurb-id="692411"\n\t\t\t     data-text-en="If this message is not showing, you might need to reset the existing microphone permissions. Find them under these icons on the address bar:"></div>\n\t\t\t<div class="tck-ui-chrome-auth-no-bar-image"></div>\n\t\t</div>\n\t</div>\n</div>'}}),define("techcheck-ui/widget/check-module/chrome-auth/main",["jquery","when","../base","techcheck-ui/utils/browser-check","template!./chromeAuth.html"],function(a,b,c,d,e){"use strict";return c.extend({config:{topic:634265,nextEnabled:!1},"hub/tech-check/recorder/ready":function(){var a=this;a.html(e).then(function(){"chrome"===d.browser?a.publish("tech-check/recorder/execute","checkMicAllowed").then(function(b){a._micAllowed=b,a._micAllowed?a.publish("tech-check/recorder/execute","preSignalCheck"):a.fail()}):a.pass()})},"hub/tech-check/flash/hasSignal":function(){this.pass()},"hub/tech-check/flash/preSignalCheckResult":function(a){var b=this;a?b.pass():(b.fail(),b._active&&(b.block(),b.publish("tech-check/recorder/execute","signalCheck")))},active:function(){var a=this;a._active=!0,a.publish("tech-check/recorder/execute","preSignalCheck")},next:function(){this.pass()}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/flash-install/banner.html",[],function(){return function(a){return'<div class="tck-ui-flash-install tck-ui-flash-banner">\n\t<div class="tck-ui-flash-inner">\n\t\t<div class="tck-ui-flash-left">\n\t\t\t<span class="tck-ui-banner-title">\n\t\t\t\t<i class="tck-ui-icon tck-ui-icon-exclamation"></i>\n\t\t\t\t<span class="tck-ui-install-tips"><span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634258" data-text-en="Install Flash"></span>:</span>\n\t\t\t</span>\n\t\t\t<span class="tck-ui-install-topic">\n\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634336" data-text-en="If you don\'t install Adobe Flash, video and audio experiences are not going to work."></span>\n\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="696257" data-text-en="Once you have installed and enabled Flash, restart your browser and come back here"></span>\n\t\t\t\t<span class="tck-ui-enable-flash" data-weave="techcheck-ui/widget/check-module/flash-install/enable-flash-tip"></span>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="tck-ui-flash-right">\n\t\t\t<a class="tck-ui-button-install" href="http://get.adobe.com/flashplayer/" target="_blank">\n\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634258" data-text-en="Install Flash"></span><i class="tck-ui-icon tck-ui-icon-new-window"></i>\n\t\t\t</a>\n\t\t\t<i class="tck-ui-flash-install-close"></i>\n\t\t</div>\n\t</div>\n</div>'}}),define("techcheck-ui/widget/check-module/flash-install/banner",["jquery","troopjs-ef/component/widget","template!./banner.html"],function(a,b,c){"use strict";return b.extend({"sig/start":function(){var a=this;return a.html(c).then(function(){var b=a.$element.find(".tck-ui-flash-banner");b.height(b.children().outerHeight(!0))})},"dom:.tck-ui-flash-install-close/click":function(a){var b=this,c=b.$element;c.children(".tck-ui-flash-banner").height(0),setTimeout(function(){c.remove(),b.publish("tech-check/cancel")},400),a.stopPropagation()}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/flash-install/column.html",[],function(){return function(a){var b='<div class="tck-ui-flash-install tck-ui-flash-column">\n\t<div class="tck-ui-flash-inner">\n\t\t<div class="tck-ui-flash-main">\n\t\t\t<i class="tck-ui-icon tck-ui-icon-exclamation"></i>\n\t\t\t<div class="tck-ui-install-tips">\n\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634258" data-text-en="Install Flash"></span>:\n\t\t\t</div>\n\t\t\t<div class="tck-ui-install-topic">\n\t\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="634259" data-text-en="Before you start the lesson, you need to install Flash plug-in. Without it, we can\'t show you the interactive presentations and videos."></p>\n\t\t\t\t<p data-weave="troopjs-ef/blurb/widget" data-blurb-id="696257" data-text-en="Once you have installed and enabled Flash, restart your browser and come back here"></p>\n\t\t\t\t<p data-weave="techcheck-ui/widget/check-module/flash-install/enable-flash-tip" class="tck-ui-enable-flash"></p>\n\t\t\t\t';return a.offline||(b+='\n\t\t\t\t\t<p class="tck-ui-ft-livechat">\n\t\t\t\t\t\t<span class="tck-ui-help-text" data-blurb-id="644326" data-text-en="Need help? Get in touch"\n\t\t\t\t\t\t      data-weave="troopjs-ef/blurb/widget"></span>\n\t\t\t\t\t\t<span data-weave="techcheck-ui/widget/shared/live-chat/main(\'small-button\')"\n\t\t\t\t\t\t      class="tck-ui-livechat-widget" data-delegate="button"></span>\n\t\t\t\t\t</p>\n\t\t\t\t'),b+='\n\t\t\t</div>\n\t\t\t<a class="tck-ui-button-install" href="http://get.adobe.com/flashplayer/" target="_blank">\n\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634258" data-text-en="Install Flash"></span><i class="tck-ui-icon tck-ui-icon-new-window"></i>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\t<i class="tck-ui-flash-install-close"></i>\n</div>'}}),define("techcheck-ui/widget/check-module/flash-install/column",["troopjs-ef/component/widget","template!./column.html"],function(a,b){"use strict";return a.extend({"sig/start":function(){var a=Boolean(this.$element.data("offline"));return this.html(b,{offline:a})}})}),define("techcheck-ui/widget/check-module/flash-install/flash-check",["techcheck-ui/utils/browser-check"],function(a){function b(a){if(a.name===f)return!0;for(var b=0;b<a.length;++b)if(a[b].type===g)return!0;return!1}function c(){for(var a=navigator.plugins||[],c=0;c<a.length;++c){if(b(a[c]))return!0}return!1}function d(){if(!("chrome"===a.browser&&h>=54))return!1;for(var c=navigator.plugins||[],d=0;d<c.length;++d){var f=c[d];if(b(f))return f.filename===e}return!1}var e="internal-not-yet-present",f="Shockwave Flash",g="application/x-shockwave-flash",h=parseInt(a.version,10);return{hasFlashPlugin:c,hasFakeFlash:d}}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/flash-install/enable-flash-tip.html",[],function(){return function(a){return'<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="695739"\n      data-text-en="You are using ^browser name^, it may block Flash by default. Please ^click here to enable Flash^.">\n\t<span class="tck-ui-enable-flash-browser-name"\n\t      data-value-name="browser name">'+a.browserName+'</span>\n\t<a class="tck-ui-enable-flash-link"\n\t   data-value-name="click here to enable Flash" data-weave-delay="troopjs-ef/blurb/widget"\n\t   data-blurb-id="695740" data-text-en="click here to enable Flash"\n\t   href="http://get.adobe.com/flashplayer/" target="_blank"></a>\n</span>'}}),define("techcheck-ui/widget/check-module/flash-install/enable-flash-tip",["troopjs-ef/component/widget","techcheck-ui/utils/browser-check","./flash-check","template!./enable-flash-tip.html"],function(a,b,c,d){var e=/\bvivaldi\/(\d+.\d+)/i,f=/\bopr\/(\d+.\d+)/i,g=navigator.userAgent,h=parseInt(b.version,10);return a.extend({"sig/start":function(){var a,i,j=this,k=!1;if(!c.hasFlashPlugin())switch(b.browser){case"chrome":k=h>=55,a=(i=e.exec(g))?"Vivaldi "+i[1]:(i=f.exec(g))?"Opera "+i[1]:"Chrome "+h;break;case"safari":k=h>=10,a="Safari "+h}if(k)return j.html(d,{browserName:a});j.$element.addClass("tck-none")}})}),define("techcheck-ui/widget/check-module/flash-install/main",["jquery","../base","./flash-check","swfobject"],function(a,b,c,d){"use strict";function e(){var a=this;a.fail(),a.block(),a.publish(f)}var f="tech-check/cancel";return b.extend({config:{standalone:!0,widgets:{banner:"techcheck-ui/widget/check-module/flash-install/banner",column:"techcheck-ui/widget/check-module/flash-install/column",overlay:"techcheck-ui/widget/check-module/flash-install/overlay"},topic:634258},"sig/start":function(){var a=this;c.hasFakeFlash()?e.call(a):a.query("ccl!'school.techcheck.ui.flash.minimum.version'").spread(function(b){d.hasFlashPlayerVersion(b.value)?a.pass():e.call(a)})}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/flash-install/overlay.html",[],function(){return function(a){return'<div class="tck-ui-flash-install-overlay">\n\t<div class="tck-ui-flash-install-bg"></div>\n\t<div class="tck-ui-flash-column-wrapper"\n\t     data-offline="'+Boolean(a.offline)+'"\n\t     data-weave="techcheck-ui/widget/check-module/flash-install/column"></div>\n</div>'}}),define("techcheck-ui/widget/check-module/flash-install/overlay",["jquery","troopjs-ef/component/widget","template!./overlay.html"],function(a,b,c){"use strict";function d(){var a=this,b=a[e].find(f),c=b.find(g),d=c.find(h);d.css({"margin-top":d.outerHeight()/2*-1,opacity:1})}var e="$element",f=".tck-ui-flash-install-overlay",g=".tck-ui-flash-column-wrapper",h=".tck-ui-flash-column";return b.extend({"sig/start":function(){var a=this,b=Boolean(this[e].data("offline"));return a.html(c,{offline:b}).then(function(){d.call(a)})},"dom:.tck-ui-flash-install-close/click":function(a){var b=this;b[e].remove(),b.publish("tech-check/cancel"),a.stopPropagation()}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/flash-setting/flashSetting.html",[],function(){return function(a){return'<div class="tck-ui-flash-setting">\n\t<div class="tck-ui-no-microphone-container tck-none">\n\t\t<div class="tck-ui-no-microphone"></div>\n\t</div>\n\n\t<div class="tck-ui-flash-setting-ui tck-none">\n\t\t<div class="tck-ui-check-module-title">\n\t\t\t<div class="tck-ui-main-title" data-weave="troopjs-ef/blurb/widget" data-blurb-id="690410" data-text-en="Please allow access to your microphone"></div>\n\t\t\t<div class="tck-ui-sub-title" data-weave="troopjs-ef/blurb/widget" data-blurb-id="634268" data-text-en="Adobe Flash requires you to allow access to your camera and microphone. We need it for video and audio exercises."></div>\n\t\t</div>\n\t\t<div class="tck-ui-check-module-body">\n\t\t\t<div class="tck-ui-main-body">\n\t\t\t\t<ul class="tck-ui-flash-setting-guide tck-active">\n\t\t\t\t\t<li class="tck-ui-flash-setting-privacy-tab">\n\t\t\t\t\t\t<span class="tck-ui-flash-setting-hint" data-weave="troopjs-ef/blurb/widget"\n\t\t\t\t\t\t      data-blurb-id="690409" data-text-en="^number^) Select the privacy tab. ^Can\'t find it?^"\n\t\t\t\t\t\t      data-values="{&quot;number&quot;:1}">\n\t\t\t\t\t\t\t<a href="javascript:;" class="tck-ui-flash-setting-cant-find-privacy-tab"\n\t\t\t\t\t\t\t   data-value-name="Can\'t find it?" data-weave-delay="troopjs-ef/blurb/widget"\n\t\t\t\t\t\t\t   data-blurb-id="690589" data-text-en="Can\'t find it"></a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="tck-ui-flash-setting-arrow tck-ui-flash-setting-arrow-a tck-bg-transition-step"></span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="tck-ui-flash-setting-enable" data-number="1" data-animation-class="tck-highlight-gray">\n\t\t\t\t\t\t<span class="tck-ui-flash-setting-hint">\n\t\t\t\t\t\t\t2)\n\t\t\t\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634270" data-text-en="Select \'Allow\' to enable the use of Flash"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="tck-ui-flash-setting-arrow tck-ui-flash-setting-arrow-b tck-bg-transition-step"></span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="tck-ui-flash-setting-rem" data-number="2" data-animation-class="tck-gray-highlight">\n\t\t\t\t\t\t<span class="tck-ui-flash-setting-hint">\n\t\t\t\t\t\t\t3)\n\t\t\t\t\t\t\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="634271" data-text-en="Then click on \'remember\' so that we don\'t have to ask again"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="tck-ui-flash-setting-arrow tck-ui-flash-setting-arrow-c tck-bg-transition-step"></span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="tck-ui-flash-setting-panel">\n\t\t\t\t\t<div class="tck-ui-flash-setting-caption" data-weave="troopjs-ef/blurb/widget" data-blurb-id="634269" data-text-en="These are the Flash settings."></div>\n\t\t\t\t\t<div class="tck-ui-flash-setting-holder">\n\t\t\t\t\t\t<i class="tck-ui-flash-setting-error-icon"></i>\n\t\t\t\t\t\t<div class="tck-ui-flash-setting-error-message"\n\t\t\t\t\t\t     data-weave="troopjs-ef/blurb/widget" data-blurb-id="690412"\n\t\t\t\t\t\t     data-text-en="Flash settings did not load properly."></div>\n\t\t\t\t\t\t<a href="javascript:;" class="tck-ui-flash-setting-error-link"\n\t\t\t\t\t\t   data-weave="troopjs-ef/blurb/widget" data-blurb-id="690413"\n\t\t\t\t\t\t   data-text-en="Here\'s how to fix it."></a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t</div>\n</div>'}}),define("techcheck-ui/widget/check-module/flash-setting/main",["when","jquery","../base","../../help-screen/keys","template!./flashSetting.html"],function(a,b,c,d,e){function f(b){var c=this;return c[g].data("offline")?a.resolve():c.publish("school/school_event_log/LogActivityEvent",{activityId:-1,eventDescr:b,eventTypeId:i})}var g="$element",h="resize.tck-ui-flash-setting",i=5,j={DISPLAY:"Display",ALLOW:"Allow"};return c.extend({config:{topic:634264},"sig/finalize":function(){b(window).off(h);var a=this;a._timer_reset_position&&clearInterval(a._timer_reset_position)},showStep:function(a){var c=this,d=c[g].find(".tck-ui-flash-setting-guide li");d.each(function(){var c=b(this),d=c.data("number"),e=c.data("animationClass"),f=d==a;e&&c.toggleClass(e,f),c.find(".tck-ui-flash-setting-arrow").toggleClass("tck-bg-transition-step",f)}),setTimeout(function(){d.each(function(){var c=b(this),d=c.data("number"),e=d==a;c.toggleClass("tck-active",e)})},0)},checkMicAllowed:function(){var a=this;return a.publish("tech-check/recorder/execute","checkMicPlugged").then(function(b){return b?a.publish("tech-check/recorder/execute","checkMicAllowed").then(function(b){return a._allowed=b}):a._allowed=void 0})},checkAndPublish:function(){var a=this;return a.checkMicAllowed().then(function(b){return b?a.pass():a.fail(),b})},startGuide:function(){var a=this;a.resetFlashPosition(),a._timer_reset_position&&clearInterval(a._timer_reset_position),a._timer_reset_position=setInterval(function(){a.resetFlashPosition()},200),setTimeout(function(){a._timer_reset_position&&clearInterval(a._timer_reset_position)},1e3),b(window).off(h).on(h,function(){a.resetFlashPosition()}),a.publish("tech-check/next-button/attach/tooltip",634274).then(function(){setTimeout(function(){a.showStep(a._allowed?2:1)},2e3)}),a.publish("tech-check/flash/privacy/startShowing")},resetFlashPosition:function(){var a,c,d=this,e=d[g].find(".tck-ui-flash-setting-holder");d._inHelpScreen||d._active&&d._plugged&&e.length&&(a=e.offset(),c=b(window).scrollTop(),d.publish("tech-check/flash/show",parseInt(a.left,10),parseInt(a.top-c,10)))},"hub/tech-check/container/scroll":function(){this.resetFlashPosition()},"hub/tech-check/flash/privacy":function(a){var b=this;a?(b.publish("tech-check/next-button/enable",!0),b._allowed=!0,b.showStep(2)):(b.publish("tech-check/next-button/enable",!1),b._allowed=!1,b.showStep(1))},"hub/tech-check/recorder/ready":function(){var a=this;a.checkAndPublish().then(function(b){void 0===a.data().reload&&!b&&a.data({reload:!0})})},"hub/tech-check/cancel/clean":function(){return this.publish("tech-check/flash/privacy/stopShowing")},"hub/tech-check/help-screen/shown":function(a){var b=this;b._inHelpScreen=!0,b._active&&b.publish("tech-check/flash/hide"),a.ensure(function(){b._inHelpScreen=!1,b.resetFlashPosition()})},active:function(){var a=this;a._active=!0,a.html(e).then(function(){a[g].find(".tck-ui-no-microphone").attr("data-weave","techcheck-ui/widget/shared/no-microphone/main(resolver)").data("resolver",function(b){b.then(null,null,function(b){b?a.checkAndPublish().then(function(b){b||(a._plugged=!0,a[g].find(".tck-ui-flash-setting-ui").removeClass("tck-none"),a[g].find(".tck-ui-no-microphone-container").addClass("tck-none"),f.call(a,j.DISPLAY),a.startGuide())}):(a._plugged=!1,a[g].find(".tck-ui-flash-setting-ui").addClass("tck-none"),a[g].find(".tck-ui-no-microphone-container").removeClass("tck-none"))})}).weave(),a.block()})},passive:function(){var a=this;a._active=!1,a.publish("tech-check/flash/hide"),b(window).off(h)},next:function(){var a=this;f.call(a,j.ALLOW).ensure(function(){a.pass()})},"dom:.tck-ui-flash-setting-cant-find-privacy-tab/click":function(a){a.preventDefault();var b=this;b._inHelpScreen=!0,b.publish("tech-check/flash/hide"),b.publish("tech-check/help-screen/show",d.HELP_SCREEN_PRIVATE_BROWSING)},"dom:.tck-ui-flash-setting-error-link/click":function(a){a.preventDefault(),this.publish("tech-check/help-screen/show",d.HELP_SCREEN_TROUBLESHOOT)}})}),define("troopjs-requirejs/template!techcheck-ui/widget/check-module/html5-mic-auth/html5MicAuth.html",[],function(){return function(a){var b='<div class="tck-ui-mic-auth">\n\t<div class="tck-ui-no-microphone-container tck-none">\n\t\t<div class="tck-ui-no-microphone"></div>\n\t</div>\n\n\t<div class="tck-ui-mic-auth-ui tck-none">\n\t\t<div class="tck-ui-check-module-title">\n\t\t\t<div class="tck-ui-main-title" data-weave="troopjs-ef/blurb/widget" data-blurb-id="697813"\n\t\t\t     data-text-en="^browser name^ needs permission to access your microphone."\n\t\t\t     data-values="{&quot;browser name&quot;:&quot;'+a.browserName+'&quot;}"></div>\n\t\t</div>\n\t\t<div class="tck-ui-check-module-body">\n\t\t\t<div class="tck-ui-main-body">\n\t\t\t\t';switch(a.browser){case"chrome":b+='\n\t\t\t\t<div class="tck-ui-mic-auth-message"\n\t\t\t\t     data-weave="troopjs-ef/blurb/widget" data-blurb-id="691561"\n\t\t\t\t     data-text-en="Please click &quot;Allow&quot; on the message at the top of the screen."></div>\n\t\t\t\t<div class="tck-ui-mic-auth-help-image-chrome"></div>\n\t\t\t\t<div class="tck-ui-mic-auth-help-message tck-ui-mic-auth-help-message-chrome"\n\t\t\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t\t\t     data-blurb-id="692411"\n\t\t\t\t     data-text-en="If this message is not showing, you might need to reset the existing microphone permissions. Find them under these icons on the address bar:"></div>\n\t\t\t\t<div class="tck-ui-mic-auth-help-image-chrome2"></div>\n\t\t\t\t';break;case"chromium":b+='\n\t\t\t\t<div class="tck-ui-mic-auth-message"\n\t\t\t\t     data-weave="troopjs-ef/blurb/widget" data-blurb-id="691561"\n\t\t\t\t     data-text-en="Please click &quot;Allow&quot; on the message at the top of the screen."></div>\n\t\t\t\t';break;case"edge":b+='\n\t\t\t\t<div class="tck-ui-mic-auth-message"\n\t\t\t\t     data-weave="troopjs-ef/blurb/widget" data-blurb-id="697817"\n\t\t\t\t     data-text-en="Please click &quot;Yes&quot; in the message at the bottom of the screen."></div>\n\t\t\t\t<div class="tck-ui-mic-auth-help-image-edge"></div>\n\t\t\t\t<div class="tck-ui-mic-auth-help-message tck-ui-mic-auth-help-message-edge"\n\t\t\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t\t\t     data-blurb-id="697818"\n\t\t\t\t     data-text-en="If you can’t see the message, you might need to reload the page and try again."></div>\n\t\t\t\t';break;case"firefox":b+='\n\t\t\t\t<div class="tck-ui-mic-auth-message"\n\t\t\t\t\t data-weave="troopjs-ef/blurb/widget" data-blurb-id="691561"\n\t\t\t\t\t data-text-en="Please click &quot;Allow&quot; on the message at the top of the screen."></div>\n\t\t\t\t<div class="tck-ui-mic-auth-firefox-table">\n\t\t\t\t\t<div class="tck-ui-mic-auth-firefox-cell">\n\t\t\t\t\t\t<div class="tck-ui-mic-auth-help-image-firefox"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="tck-ui-mic-auth-firefox-cell">\n\t\t\t\t\t\t<div class="tck-ui-mic-auth-help-message">\n\t\t\t\t\t\t\t<span data-weave="troopjs-ef/blurb/widget"\n\t\t\t\t\t\t\t      data-blurb-id="697815"\n\t\t\t\t\t\t\t      data-text-en="If you can’t see the message, you might need to reset your microphone permissions."></span>\n\t\t\t\t\t\t\t<span data-weave="troopjs-ef/blurb/widget"\n\t\t\t\t\t\t\t      data-blurb-id="697816"\n\t\t\t\t\t\t\t      data-text-en="Click the microphone icon in the address bar."></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="tck-ui-mic-auth-help-image-firefox2"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t'}return b+="\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>"}}),define("techcheck-ui/widget/check-module/html5-mic-auth/main",["when","jquery","../base","template!./html5MicAuth.html"],function(a,b,c,d){function e(a){var b=this;return b.publish(m,"checkMicPlugged").then(function(c){return!!c&&b.publish(m,"checkMicAllowed",a)})}function f(){var a=this;e.call(a).then(function(b){b?a.pass():setTimeout(function(){a[i]&&f.call(a)},n)})}function g(a){var b=this;a.then(null,null,function(a){b[h].find(j).toggleClass(l,!a),b[h].find(k).toggleClass(l,Boolean(a)),a&&f.call(b)})}var h="$element",i="_active",j=".tck-ui-mic-auth-ui",k=".tck-ui-no-microphone-container",l="tck-none",m="tech-check/recorder/execute",n=200,o="chrome",p="Chrome",q=navigator.userAgent;return/\bedge\b/i.test(q)?(o="edge",p="Edge"):/\bfirefox\b/i.test(q)?(o="firefox",p="Firefox"):/\bvivaldi\b/i.test(q)?(o="chromium",p="Vivaldi"):/\bopr\b/i.test(q)&&(o="chromium",p="Opera"),c.extend({config:{topic:697812,nextEnabled:!1},"sig/finalize":function(){this[i]=!1},"hub/tech-check/recorder/ready":function(){var a=this;e.call(a,300).then(function(b){return b?a.pass():a.fail(),b})},active:function(){var a=this;a[i]=!0,a.html(d,{browser:o,browserName:p}).then(function(){a[h].find(".tck-ui-no-microphone").attr("data-weave","techcheck-ui/widget/shared/no-microphone/main(resolver)").data("resolver",g.bind(a)).weave(),a.block()})},passive:function(){var a=this;a[i]=!1,a.html("")}})}),define("troopjs-requirejs/template!techcheck-ui/widget/container/container.html",[],function(){return function(a){var b='<div class="tck-ui-container modal fade" role="dialog"\n     data-weave="techcheck-ui/widget/container/tracking">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content tck-ui-content">\n\t\t\t<div class="modal-header" data-weave-on-show="techcheck-ui/widget/header/main"></div>\n\t\t\t<div class="modal-body">\n\t\t\t\t\x3c!--tech check nav--\x3e\n\t\t\t\t<div class="tck-ui-nav" data-weave-on-show="techcheck-ui/widget/navigation/main"></div>\n\t\t\t\t\x3c!--tech check module--\x3e\n\t\t\t\t<div class="tck-ui-body tck-ui-body-main">\n\n\t\t\t\t</div>\n\t\t\t\t<div class="tck-ui-body tck-ui-help-screen tck-none"\n\t\t\t\t     data-offline="'+a.offline+'"\n\t\t\t\t     data-weave-on-show="techcheck-ui/widget/help-screen/main"></div>\n\t\t\t</div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t\x3c!--tech check bottom bar--\x3e\n\t\t\t\t<div class="tck-ui-footer"\n\t\t\t\t     data-offline="'+a.offline+'"\n\t\t\t\t     data-weave-on-show="techcheck-ui/widget/bottom-bar/main"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="tck-ui-module-standalone tck-none"></div>\n';return"html5"===a.recorderMode?b+='\n<div data-weave="techcheck-ui/widget/recorder/html5/main"></div>\n':b+='\n<div class="tck-ui-flash-container" data-weave="techcheck-ui/widget/recorder/flash/main"></div>\n',b}}),define("techcheck-ui/widget/container/main",["module","jquery","when","jquery.gudstrap","poly","troopjs-ef/component/widget","template!./container.html"],function(a,b,c,d,e,f,g){"use strict";function h(){var a=this[v].offline;return!0===a||!1===a?a:Boolean(this[s].data("offline"))}function i(a){return a.map(function(a){return"object"==typeof a?b.extend({},a):a})}function j(){var a=this;a[s].find(z).scroll(function(){a.publish(I)})}function k(){var a=this,d=a[s].find("[data-weave-on-show]");return 0===d.length?c.resolve():(d.each(function(){var a=b(this);a.attr("data-weave",a.attr("data-weave-on-show")),a.removeAttr("data-weave-on-show")}),d.weave())}function l(){var a=this;if(a[s].find(z).hasClass("in"))return c.resolve();a[y]=c.defer();var d=a[s].find(z);return d.hasClass("in")||(d.css({display:"block"}),b(document.body).addClass(F),setTimeout(function(){d.addClass("in"),a[s].append('<div class="modal-backdrop fade in"></div>'),setTimeout(function(){a[y].resolve()},K)},0)),a[y].promise}function m(){var a=this,d=c.defer();return a[s].find(z).removeClass("in"),a.publish(J),setTimeout(function(){b(document.body).removeClass(F),a[s].empty(),d.resolve()},K),d.promise}function n(a){var b=this,c=b[s];[B,D].forEach(function(b){c.find(b).toggleClass(E,b!==a)}),c.find(C).toggleClass(E,B!==a),b.publish(I)}function o(){var a=this;a[x]=c.defer(),a[w]=c.defer(),a[x].promise.then(function(b){a.publish(G,b),p.call(a,b)})}function p(a){var b=this;a.every(function(a){return 0!=a.passed||(a.standalone||(b[s].find(A).addClass(E).end().find("[module-name="+a.id+"]").removeClass(E),k.call(b).then(function(){return l.call(b)}).then(function(){b.publish(H,a.id)})),!1)})}function q(a){var b=!1;return a.every(function(a){return!a.reload||(b=!0,!1)}),b}function r(a){var b=this;return t=!1,b[w]?(a?b[w].resolve(i(a)):b[w].reject("cancel techcheck"),m.call(b).then(function(){a&&q(a)&&window.location.reload()})):c.resolve()}var s="$element",t=!1,u="_results",v="_params",w="_checkResultDfd",x="_preCheckDfd",y="_modalShownDfd",z=".tck-ui-container",A=".tck-ui-check-module",B=".tck-ui-body-main",C=".tck-ui-nav",D=".tck-ui-help-screen",E="tck-none",F="modal-open",G="tech-check/preCheck/finished",H="tech-check/module/active",I="tech-check/container/scroll",J="tech-check/recorder/hide",K=300;return f.extend(function(){this[u]=[],this[v]={}},{"hub/tech-check/request":function(d,e){var f=this,k=b.extend({},a.config()||{},e||{});if(d){if(t)return c.reject("repeated call tech-check request");t=!0,f[v]=k,f[u]=i(d);var l=h.call(f);return f.html(g,{offline:l,recorderMode:k.recorderMode}).then(function(){return j.call(f),o.call(f),c.all(c.map(d,function(a){return b("<div></div>").addClass("tck-ui-check-module").addClass(E).attr("module-name",a.id).attr("data-weave","techcheck-ui/widget/check-module/"+a.id+"/main(moduleConfig)").data("moduleConfig",b.extend({},a)).data("offline",l).appendTo(f[s].find(".tck-ui-module-standalone")).weave()})).then(function(){f.publish("tech-check/recorder/init",k)}),f[w].promise})}},"hub/tech-check/module/result":function(a){var c=this;(c[u].every(function(c){return c.id!=a.id||(b.extend(c,a),!1)}),c[u].every(function(a){return a.passed})?r.call(c,c[u]):c[w].notify(i(c[u])),"fulfilled"==c[x].promise.inspect().state)?p.call(c,c[u]):(a.standalone||c[s].find("[module-name="+a.id+"]").appendTo(".tck-ui-content .tck-ui-body.tck-ui-body-main"),c[u].every(function(a){return a.hasOwnProperty("passed")})&&c[x].resolve(i(c[u])))},"hub/tech-check/cancel":function(){var a=this;return a.publish("tech-check/cancel/clean").then(function(){return r.call(a)},function(b){return c.reject(b),r.call(a)})},"hub/tech-check/help-screen/shown":function(a){var b=this;n.call(b,D),a.ensure(function(){n.call(b,B)})}
})}),define("techcheck-ui/widget/container/tracking",["require","when","troopjs-ef/component/widget","../help-screen/keys"],function(a,b,c,d){function e(a){f.then(function(b){b.useraction(a)})}if(!a.defined("client-tracking"))return c;var f=b.promise(function(b){a(["client-tracking"],b)});return c.extend(function(){this._activeModuleId=null,this._troubleshootShown=!1},{"hub/tech-check/module/active":function(a){this._activeModuleId=a},"hub/tech-check/help-screen/shown":function(a,b){b===d.HELP_SCREEN_TROUBLESHOOT&&(this._troubleshootShown=!0,a.ensure(function(){this._troubleshootShown=!1}))},"dom:[data-tracking=troubleshoot]/click":function(){e({"action.tcHavingTrouble":"1","action.tcStepName":this._activeModuleId})},"dom:[data-tracking=update-flash]/click":function(){this._troubleshootShown&&e({"action.tcUpgradeFlash":"1"})},"dom:[data-tracking=download-chrome]/click":function(){this._troubleshootShown&&e({"action.tcDownloadChrome":"1"})},"dom:[data-tracking=contact-us]/click":function(){this._troubleshootShown&&e({"action.tcContactUs":"1"})}})}),define("troopjs-requirejs/template!techcheck-ui/widget/header/header.html",[],function(){return function(a){return'<a class="tck-ui-go-back tck-none">\n\t<i></i>\n\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="690423" data-text-en="Go back"></span>\n</a>\n<h4 class="modal-title">'+a.title+"</h4>"}}),define("techcheck-ui/widget/header/main",["when","troopjs-ef/component/widget","../help-screen/keys","template!./header.html"],function(a,b,c,d){"use strict";function e(a){return"blurb!"+l[a].id}function f(a){this[h].find(j).text(a)}function g(a){this[h].find(k).toggleClass(i,!a)}var h="$element",i="tck-none",j=".modal-title",k=".tck-ui-go-back",l={TITLE_TECHCHECK:{id:"634263",en:"Technology check"},TITLE_TROUBLESHOOT:{id:"690431",en:"Trouble shooting"}};return b.extend(function(){this._translations={}},{"sig/start":function(){var a=this,b=Object.keys(l);return a.query(b.map(e)).then(function(c){b.forEach(function(b,d){var e=c[d];a._translations[b]=e&&e.translation||""})}).then(function(){return a.html(d,{title:a._translations.TITLE_TECHCHECK})})},"hub/tech-check/help-screen/shown":function(a,b){var d=this;g.call(d,!0),b===c.HELP_SCREEN_TROUBLESHOOT&&f.call(d,d._translations.TITLE_TROUBLESHOOT),a.ensure(function(){g.call(d,!1),f.call(d,d._translations.TITLE_TECHCHECK)})},"dom:.tck-ui-go-back/click":function(){this.publish("tech-check/go-back")}})}),define("troopjs-requirejs/template!techcheck-ui/widget/help-screen/troubleshoot.html",[],function(){return function(a){var b='<div class="tck-ui-main-title"\n     data-weave="troopjs-ef/blurb/widget" data-blurb-id="690432"\n     data-text-en="Stuck? You might be experiencing some incompatibility problem."></div>\n<div class="tck-ui-troubleshoot-update-table">\n\t<div class="tck-ui-troubleshoot-update-cell">\n\t\t<div class="tck-ui-troubleshoot-title"\n\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t     data-blurb-id="690433" data-text-en="Update your Flash plugin."></div>\n\t\t<div class="tck-ui-description"\n\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t     data-blurb-id="692412"\n\t\t     data-text-en="Using the last version might fix your problem:"></div>\n\t\t<a class="btn btn-primary"\n\t\t   data-tracking="update-flash"\n\t\t   target="_blank" href="'+a.flashUrl+'"\n\t\t   data-weave="troopjs-ef/blurb/widget"\n\t\t   data-blurb-id="690435" data-text-en="Update Flash"></a>\n\t</div>\n\t<div class="tck-ui-troubleshoot-update-separator">\n\t\t<div class="tck-ui-troubleshoot-vertical-line"></div>\n\t\t<div data-weave="troopjs-ef/blurb/widget"\n\t\t     data-blurb-id="692418" data-text-en="or"></div>\n\t\t<div class="tck-ui-troubleshoot-vertical-line"></div>\n\t</div>\n\t<div class="tck-ui-troubleshoot-update-cell">\n\t\t';return a.isUsingChrome?b+='\n\t\t<div class="tck-ui-troubleshoot-title"\n\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t     data-blurb-id="692417" data-text-en="Update your Browser."></div>\n\t\t<div class="tck-ui-description"\n\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t     data-blurb-id="692417"\n\t\t     data-text-en="We recomend using the latest version of Chrome:"></div>\n\t\t<a class="btn btn-primary"\n\t\t   data-tracking="download-chrome"\n\t\t   target="_blank" href="'+a.chromeUrl+'"\n\t\t   data-weave="troopjs-ef/blurb/widget"\n\t\t   data-blurb-id="692419" data-text-en="Update Chrome"></a>\n\t\t':b+='\n\t\t<div class="tck-ui-troubleshoot-title"\n\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t     data-blurb-id="692413" data-text-en="Try a different browser."></div>\n\t\t<div class="tck-ui-description"\n\t\t     data-weave="troopjs-ef/blurb/widget"\n\t\t     data-blurb-id="692414" data-text-en="We recommend Google Chrome"></div>\n\t\t<a class="btn btn-primary"\n\t\t   data-tracking="download-chrome"\n\t\t   target="_blank" href="'+a.chromeUrl+'"\n\t\t   data-weave="troopjs-ef/blurb/widget"\n\t\t   data-blurb-id="692415" data-text-en="Download Chrome"></a>\n\t\t',b+="\n\t</div>\n</div>"}}),define("troopjs-requirejs/template!techcheck-ui/widget/help-screen/private-browsing.html",[],function(){return function(a){var b='<div class="tck-ui-main-title"\n     data-weave="troopjs-ef/blurb/widget" data-blurb-id="690416"\n     data-text-en="You might be running in private mode"></div>\n<div class="tck-ui-description"\n     data-weave="troopjs-ef/blurb/widget" data-blurb-id="690417"\n     data-text-en="Because of your internet access and browser settings, we can\'t access your microphone, which we need for your class."></div>\n';return a.offline?b+='\n\t<div class="tck-ui-description"\n\t     data-weave="troopjs-ef/blurb/widget" data-blurb-id="694600"\n\t     data-text-en="Please check you are not using the private browsing or incognito mode on your browser."></div>\n':b+='\n\t<div class="tck-ui-description"\n\t     data-weave="troopjs-ef/blurb/widget" data-blurb-id="690418"\n\t     data-text-en="Please check you are not using the private browsing or incognito mode on your browser. If you need more help, contact our support team:"></div>\n\t<div data-weave="techcheck-ui/widget/shared/live-chat/main(\'big-button\')"\n\t     data-delegate="button"></div>\n',b}}),define("techcheck-ui/widget/help-screen/main",["when","troopjs-ef/component/widget","./keys","../../utils/download-urls","template!./troubleshoot.html","template!./private-browsing.html"],function(a,b,c,d,e,f){"use strict";function g(){var a=this;a[p].removeClass(l).removeClass(m),a.html("")}function h(b){var h=this,i=a.promise(function(a){h[q]=a});return a.resolve().then(function(){switch(b){case c.HELP_SCREEN_TROUBLESHOOT:return h[p].addClass(l),h.html(e,{chromeUrl:h[r],flashUrl:d.flashUrl,isUsingChrome:k});case c.HELP_SCREEN_PRIVATE_BROWSING:h[p].addClass(m);var a=h[p].data("offline");return h.html(f,{offline:a});default:throw new Error("Unknown help screen key "+b)}}).then(function(){h.publish(n,i,b),h.publish(o,!0)},function(a){throw h[q]=null,g.call(h),a})}function i(){var a=this,b=a[q];a[q]=null,g.call(a),a.publish(o,!1),b()}var j=/^\s*Mozilla\/5.0\s+\([^)]+\)\s+AppleWebKit\/[\d.]+\s+\([^)]+\)\s+Chrome\/[\d.]+\s+Safari\/[\d.]+\s*$/i,k=j.test(navigator.userAgent),l="tck-ui-troubleshoot",m="tck-ui-private-browsing",n="tech-check/help-screen/shown",o="tech-check/livechat-button/enable",p="$element",q="_whileShownResolve",r="_chromeUrl";return b.extend(function(){this[q]=null},{"sig/start":function(){var a=this;return a.query(d.chromeUrlCcl).spread(function(b){a[r]=b&&b.value||""})},"hub/tech-check/help-screen/show":function(a){var b=this;if(!b[q])return h.call(b,a)},"hub/tech-check/go-back":function(){var a=this;a[q]&&i.call(a)}})}),define("troopjs-requirejs/template!techcheck-ui/widget/navigation/navigation.html",[],function(){return function(a){for(var b='<div class="tck-ui-nav-container">\n\t<ul>\n\t',c=a,d=0;d<c.length;d++)b+='\n\t\t<li class="tck-ui-nav-module" data-module-id="'+c[d].id+'">\n\t\t\t<i class="tck-ui-nav-icon">'+(d+1)+"</i>\n\t\t\t"+c[d].topic+"\n\t\t</li>\n\t\t",d!==c.length-1&&(b+='\n\t\t\t<i class="tck-ui-nav-split"></i>\n\t\t'),b+="\n\t";return b+="\n\t</ul>\n</div>"}}),define("techcheck-ui/widget/navigation/main",["troopjs-ef/component/widget","template!./navigation.html"],function(a,b){return a.extend({"hub:memory/tech-check/preCheck/finished":function(a){var c=this;c._checkModules=a.filter(function(a){return!a.standalone&&!a.passed}),c._checkModules.length>1&&c.html(b,c._checkModules).then(function(){c._checkModules.forEach(function(a){c.update(a)})})},"hub/tech-check/module/result":function(a){this.update(a)},"hub:memory/tech-check/module/active":function(a){var b=this;b._checkModules&&(b.$element.find(".tck-ui-nav-module").removeClass("tck-ui-nav-active"),b.$element.find("[data-module-id="+a+"]").addClass("tck-ui-nav-active"))},update:function(a){var b=this;b._checkModules&&b.$element.find("[data-module-id="+a.id+"]").toggleClass("tck-ui-nav-passed",a.passed&&!a.skippable).toggleClass("tck-ui-nav-skipped",a.passed&&a.skippable)}})}),define("techcheck-ui/widget/recorder/flash/main",["jquery","when","swfobject","troopjs-core/pubsub/hub","troopjs-ef/component/widget","techcheck-ui/utils/cclCacheServer","techcheck-ui/utils/browser-check"],function(a,b,c,d,e,f,g){function h(a){var c=this,d=c[j][m].apply(c[j],a);if(d&&d.names&&d.names.length>0){var e,f=!0,g=d.names.length;for(e=0;e<g;++e)if(!/^\s*$/.test(d.names[e])){f=!1;break}if(f)return b.promise(function(b){setTimeout(function(){if(c[j]){var e=c[j][m].apply(c[j],a);b(e)}else b(d)},l)})}return d}function i(){clearInterval(this[k]),this[k]=0}var j="_flash",k="_timer_privacy_show",l=2e3,m="getMicList";return window.efTechCheck={recorderInit:function(){setTimeout(function(){d.publish.call(d,"tech-check/recorder/ready")},0)},recording:function(){var a=Array.prototype.slice.call(arguments);a.unshift("tech-check/recorder/recording"),d.publish.apply(d,a)},playback:function(){var a=Array.prototype.slice.call(arguments);a.unshift("tech-check/recorder/playback"),d.publish.apply(d,a)},privacy:function(){var a=Array.prototype.slice.call(arguments);a.unshift("tech-check/flash/privacy"),d.publish.apply(d,a)},hasSignal:function(){var a=Array.prototype.slice.call(arguments);a.unshift("tech-check/flash/hasSignal"),d.publish.apply(d,a)},preSignalCheckResult:function(){var a=Array.prototype.slice.call(arguments);a.unshift("tech-check/flash/preSignalCheckResult"),d.publish.apply(d,a)}},e.extend({"sig/finalize":function(){this[k]&&(clearInterval(this[k]),this[k]=0),delete this[j],this._finalized=!0},"hub/tech-check/recorder/init":function(a){var d,e=this;d=a.flashPath?b.resolve(a.flashPath.replace("{version}","1.3").replace("{version,-}","1-3")):e.query(f).spread(function(a){return[a&&a.value||"","_shared/techcheck-flash","1.3","techcheck.swf"].join("/")});var h=e.query("blurb!690414").spread(function(a){return a&&a.translation||""});return b.promise(function(a,f){b.all([d,h]).spread(function(b,d){e.html('<div id="tck-ui-flash"></div>').then(function(){if(!e._finalized){var f=window.efTechCheck||{};f._recorderInit=function(){f.recorderInit(),a()};var h={init:"efTechCheck._recorderInit",clientPlayCallback:"efTechCheck.playback",recordingCallback:"efTechCheck.recording",privacyCallback:"efTechCheck.privacy",hasSignalCallback:"efTechCheck.hasSignal",preSignalCheckResultCallback:"efTechCheck.preSignalCheckResult",backgroundMessage:d,backgroundMessageAlign:"center"},i={},k={};i.quality="high",i.bgcolor="#EEEEEE",i.allowscriptaccess="always",i.allowfullscreen="true",i.allowDomain="true",i.wmode="opaque",k.id="tck-ui-flash",k.name="tech-check-flash",k.align="middle",c.embedSWF(b+("msie"===g.browser?"?"+new Date:""),"tck-ui-flash","500","500","10.0.0","playerproductinstall.swf",h,i,k,function(a){e[j]=a.ref}),c.createCSS("#tck-ui-flash","display:block;text-align:left;")}})}).otherwise(f)})},"hub/tech-check/flash/privacy/startShowing":function(){var a=this;i.call(a),a.publish("tech-check/recorder/execute","ensurePrivacy");var b=a[k]=setInterval(function(){a.publish("tech-check/recorder/execute","ensurePrivacy").otherwise(function(c){throw b===a[k]&&i.call(a),c})},1e3)},"hub/tech-check/flash/privacy/stopShowing":function(){i.call(this)},"hub/tech-check/module/active":function(){i.call(this)},"hub/tech-check/recorder/execute":function(a){var c=this,d=Array.prototype.slice.call(arguments);d.shift();try{return c[j]&&c[j][a]?("safari"===g.browser&&parseFloat(g.version,10)>=7&&c[j].click(),m===a?h.call(c,d):c[j][a].apply(c[j],d)):b.reject("unable to call flash function "+a)}catch(a){return b.reject("techcheck flash execute error : "+a)}},"hub/tech-check/flash/show":function(a,b){this.$element.css({left:a,top:b}),this.$element.find("#tck-ui-flash").attr({width:"215",height:"140"})},"hub/tech-check/flash/hide":function(){this.$element.css({left:-9999,top:0}),this.$element.find("#tck-ui-flash").attr({width:"500",height:"500"})}})}),define("techcheck-ui/widget/recorder/html5/main",["jquery","when","troopjs-core/pubsub/hub","troopjs-ef/component/widget","asr-core","techcheck-ui/utils/browser-check"],function(a,b,c,d,e,f){function g(){var a=this;"safari"===f.browser&&e.getPlayer().play(new Float32Array(1)),e.startClientRecording({disableZip:!0}).then(function(b){a.publish(i,"START"),b.resultPromise.then(function(b){a.publish(i,"COMPLETE",null,b.duration)},function(b){a.publish(i,"ERROR",b)})})}function h(a){var c=this,d=Array.prototype.slice.call(arguments);switch(d.shift(),a){case"startTechCheckRecording":g.call(c);break;case"stopTechCheckRecording":e.stopClientRecording();break;case"startTechCheckPlayback":c.publish(j,"START"),e.startClientPlayback().then(function(){c.publish(j,"COMPLETE")});break;case"stopTechCheckPlayback":e.stopClientPlayback();break;case"getMicActivity":return e.getMicActivity();case"checkMicPlugged":return e.checkMicPlugged();case"checkMicAllowed":return e.checkMicAllowed(d[0]);case"setMic":case"getMicList":break;default:return b.reject("techcheck unknown recorder function: "+a)}}var i="tech-check/recorder/recording",j="tech-check/recorder/playback";return d.extend({"hub/tech-check/recorder/init":function(){var a=this;setTimeout(function(){a.publish("tech-check/recorder/ready")},0)},"hub/tech-check/recorder/execute":function(){return h.apply(this,arguments)}})}),define("troopjs-requirejs/template!techcheck-ui/widget/shared/live-chat/big-button.html",[],function(){return function(a){return'<button type="button" class="btn btn-primary tck-ui-button-help tck-ui-livechat-when-online"\n        data-action="help" data-tracking="contact-us">\n\t<span data-weave="troopjs-ef/blurb/widget" data-blurb-id="690419" data-text-en="Get live help"></span>\n\t<i class="tck-ui-icon tck-ui-icon-help-status"></i>\n</button>\n<a href="javascript:;" class="tck-ui-livechat-offline-button tck-ui-livechat-when-online"\n   data-tracking="contact-us"\n   data-weave="troopjs-ef/blurb/widget"\n   data-blurb-id="692409" data-text-en="Or contact us"></a>\n<button type="button" class="btn btn-primary tck-ui-button-help tck-ui-livechat-when-offline"\n        data-action="help" data-tracking="contact-us"\n        data-weave="troopjs-ef/blurb/widget" data-blurb-id="690422" data-text-en="Contact us"></button>\n<div class="tck-ui-livechat-loading-spinner"></div>'}}),define("troopjs-requirejs/template!techcheck-ui/widget/shared/live-chat/small-button.html",[],function(){return function(a){return'<button class="tck-ui-button-help tck-ui-livechat-when-offline"\n        data-action="help" data-tracking="contact-us"\n        data-weave="troopjs-ef/blurb/widget" data-blurb-id="666240" data-text-en="Help Center"></button>\n<div class="tck-ui-livechat-loading-spinner"></div>'}}),define("techcheck-ui/widget/shared/live-chat/main",["troopjs-ef/component/widget","module","template!techcheck-ui/widget/shared/live-chat/big-button.html","template!techcheck-ui/widget/shared/live-chat/small-button.html"],function(a,b,c,d){var e={"big-button":c,"small-button":d};return a.extend(function(a,b,c){this._templateName=c},{"sig/start":function(){var a=this,b=a._templateName,c=e[b];if(!c)throw new Error('Invalid livechat button template "'+b+'"');a.html(c)},"dom:.tck-ui-livechat-when-offline/click":function(){var a=b.config().helpCenterUrl;a&&window.open(a,"contactus")}})}),define("troopjs-requirejs/template!techcheck-ui/widget/shared/no-microphone/noMicrophone.html",[],function(){return function(a){return'<div class="tck-ui-no-microphone-ui">\n\t<div class="tck-ui-check-module-title">\n\t\t<div class="tck-ui-main-title" data-weave="troopjs-ef/blurb/widget" data-blurb-id="634313" data-text-en="We cannot find any microphone"></div>\n\t</div>\n\n\t<div class="tck-ui-check-module-body">\n\t\t<div class="tck-ui-main-body tck-ui-no-mic">\n\t\t\t<div class="tck-ui-no-mic-holder">\n\t\t\t\t<div class="tck-ui-no-mic-icon">\n\t\t\t\t\t<i class="tck-ui-mic-question"></i>\n\t\t\t\t\t<i class="tck-ui-mic-gray"></i>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="tck-ui-no-mic-tips">\n\t\t\t\t<span class="tck-ui-no-mic-a" data-weave="troopjs-ef/blurb/widget" data-blurb-id="634314" data-text-en="We can\'t hear anything coming from your microphone."></span>\n\t\t\t\t<br/>\n\t\t\t\t<span class="tck-ui-no-mic-b" data-weave="troopjs-ef/blurb/widget" data-blurb-id="634315" data-text-en="Have a look to see if it\'s connected or muted, and click to recheck."></span>\n\t\t\t</div>\n\t\t\t<div class="tck-ui-found-mic-tips" data-weave="troopjs-ef/blurb/widget" data-blurb-id="634337" data-text-en="Success, we detected your microphone."></div>\n\t\t\t<div class="tck-ui-recheck-mic">\n\t\t\t\t<button class="btn btn-secondary tck-ui-recheck-btn" data-action="recheck"  data-weave="troopjs-ef/blurb/widget" data-blurb-id="634316" data-text-en="Re-check microphone"></button>\n\t\t\t\t<div class="tck-ui-recheck-loading tck-none"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'}}),define("techcheck-ui/widget/shared/no-microphone/main",["when","troopjs-ef/component/widget","template!./noMicrophone.html"],function(a,b,c){var d="_timer_checking",e="_timer_stop_checking";return b.extend(function(b,c,d){var e=this;e._defer_check_mic=a.defer(),d&&d(e._defer_check_mic.promise)},{"sig/start":function(){var a=this;a.checkMicPlugged().then(function(b){b?a._defer_check_mic.notify(!0):(a._defer_check_mic.notify(!1),a.render().then(function(){a.startGuide()}))})},"sig/finalize":function(){var a=this;a[d]&&clearTimeout(a[d]),a[e]&&clearTimeout(a[e]),a._timer_check_mic&&clearTimeout(a._timer_check_mic)},render:function(){return this.html(c)},startGuide:function(){var a=this;setTimeout(function(){a.$element.find(".tck-ui-recheck-mic").removeClass("tck-ui-recheck-show-loading"),a.checkMicPlugged().then(function(b){b=!0===b,a.$element.find(".tck-ui-no-microphone-ui").toggleClass("tck-ui-mic-found",b),a.$element.find(".tck-ui-no-microphone-ui").toggleClass("tck-ui-mic-not-found",!b),b&&(a._timer_check_mic&&clearTimeout(a._timer_check_mic),a._timer_check_mic=setTimeout(function(){a._defer_check_mic.notify(!0)},2500))})},0)},checkMicPlugged:function(b){var c=this;return a.promise(function(a){function f(){c.publish("tech-check/recorder/execute","checkMicPlugged").then(function(h){h?(a(!0),c[e]&&clearTimeout(c[e]),delete c[e]):b?(c[d]=setTimeout(f,300),c[e]=c[e]||setTimeout(g,b)):a(!1)})}function g(){c[d]&&clearTimeout(c[d]),delete c[e],a(!1)}f()})},"dom:[data-action=recheck]/click":function(){var a=this;a.$element.find(".tck-ui-recheck-mic").addClass("tck-ui-recheck-show-loading"),a.checkMicPlugged(5e3).then(function(b){b?a.startGuide():a.render().then(function(){a.startGuide()})})}})});
//# sourceMappingURL=app-built.min.js.map