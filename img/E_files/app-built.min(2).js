define("livechat-ui/livechat-status",["jquery","liveagent"],function(n,e){function t(n){var i=t.hasOwnProperty(n)?n:"default";return t[i].apply(e,arguments)}function i(e,t){var o=this;return o instanceof i?(o.option=e,o.user=t||{},o.onlineElement=n('<a href="javascript://Chat" style="display:none;">Online'+o.option.buttonId+"</a>"),void(o.offlineElement=n('<div style="display:none;">Offline'+o.option.buttonId+"</div>"))):new i(e,t)}window._laq||(window._laq=[]);var o=window._laq,a="BUTTON_AVAILABLE";return t["default"]=function(n,t){return e.addCustomDetail.apply(e,arguments)},t.Email=function(){return t["default"].apply(e,arguments).map("Contact","Email",!0,!0,!0).saveToTranscript("Email__c")},i.prototype={start:function(){var i=this,r=n.Deferred();return o.push(function(){e.showWhenOffline(i.option.buttonId,i.offlineElement[0]),e.addButtonEventHandler(i.option.buttonId,function(n){r.resolve({online:a===n,liveagent:e})}),n.each(i.user,t)}),e.init(i.option.url,i.option.deploymentId,i.option.orgId),r.promise()}},i.constructor=i,i}),define("text!livechat-ui/livechat-status.html",[],function(){return"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge, requiresActiveX=true, chrome=1\">\n  <script src=\"/_shared/require.js/2.1.5/require.min.js\"></script>\n  <script src=\"/_shared/jquery/1.11.1/jquery.min.js\"></script>\n</head>\n<body>\n<script>\nfunction getSetting(qs) {\n  var option = {};\n  $.each(qs.split('&'), function(i, n) {\n    n = n.split('=');\n    if (n.length === 2) {\n      option[decodeURIComponent(n[0])] = decodeURIComponent(n[1]);\n    }\n  });\n  return option;\n}\n\nfunction fireEvent(element, event, detail) {\n  var evt;\n  if (document.createEvent) {\n    evt = document.createEvent('HTMLEvents');\n    evt.initEvent(event, true, true); // event type,bubbling,cancelable\n    evt.detail = detail;\n    return !element.dispatchEvent(evt);\n  } else {\n    // dispatch for IE\n    evt = document.createEventObject();\n    evt.detail = detail;\n    return element.fireEvent('on' + event, evt);\n  }\n}\n\nif (typeof $ === 'undefined') {\n    location.reload();\n} else {\n\nvar container = window.frameElement;\nvar config = container ? $.param($(container).data()) : location.search.substr(1);\nconfig = getSetting(config);\ndefine('config', config);\ndefine('user', parent[window.name] || {});\n\nrequire.config({\n  waitSeconds: 0,\n  baseUrl: '.',\n  paths: {\n    'liveagent': 'https://c.la1t1.salesforceliveagent.com/content/g/js/33.0/deployment',\n    'livechat-ui': config.package || '.'\n  },\n  shim: {\n    'liveagent': {\n      exports: 'liveagent'\n    },\n  },\n  deps: ['require', 'livechat-ui'],  callback: function(require) {\n    require(['livechat-ui/livechat-status', 'jquery', 'config', 'user'], function(LiveChatStatus, $, config, user) {\n      if (!$.isEmptyObject(config)) {\n        var button = LiveChatStatus(config, user);\n        button.start()\n        .done(function(status) {\n          if (container) {\n            fireEvent(container, 'paste', status);\n          }\n        });\n      }\n    });\n  }\n});\n}\n</script>\n</body>\n</html>\n"}),define("livechat-ui/livechat-button",["jquery","text!./livechat-status.html","module","jquery.cookie"],function(n,e,t){function i(e,t,o,a){var r=this;return r instanceof i?(o=n.extend(!0,{},s,o),void i.prototype.init.apply(r,arguments)):new i(e,t,o,a)}var o=t.id,a=t.uri,r="app-built",c=".min",l=new RegExp("(/?"+r+"("+c+")?)?"+o.replace(/[^\/]*/,"")+".*$"),u=a.replace(l,"/"+r+c),s=t.config(),d="LIVECHAT",f="/customerservice/contactus/inschool";return i.prototype={init:function(n,e,t,i){var o=this;o.$element=n,o.candidates=e,o.onlineCandidate=null,o.option=t,o.isOnline=!1,o.chatWindow=null,o.bind(i),o.isEnabled().then(function(){o.check()},function(){o.$element.trigger("statuschange",!1)})},isEnabled:function(){return n.get("/campus/core/LiveChat.ashx?action=islivechatenabled").then(function(e){return n.Deferred(function(){return e.IsEnabled?this.resolve():this.reject()})})},bind:function(e){var t=this,i=["click"],o=function(n){n.preventDefault(),t.open(t.option)};e&&i.push(e),i.push(o),n.fn.on.apply(t.$element,i),t.$element.on("statuschange",function(n,e){t.$element.toggleClass("livechat-online",e),t.$element.toggleClass("livechat-offline",!e)})},check:function(t){var i=this;arguments.length||(t=0);var o=i.candidates[t],a="livechat-"+t;if(!o)return void setTimeout(function(){i.$element.trigger("statuschange",i.isOnline)},1);var r={"button-id":o,url:i.option.sf.url,"deployment-id":i.option.sf.deploymentId,"org-id":i.option.sf.orgId,"package":u},c="";n.each(r,function(n,e){c+="data-"+n+'="'+e+'" '});var l=n('<iframe width="0" height="0" frameborder="0" src="about:blank" '+c+' name="'+a+'"></iframe>').one("paste",function(n){n.stopPropagation();var e=n.originalEvent.detail;if(i.isOnline=e.online,i.isOnline)i.onlineAgent=e.liveagent,i.onlineCandidate=o;else{var a=t+1;a<i.candidates.length&&i.check(a)}i.$element.trigger("statuschange",i.isOnline)}).appendTo(i.$element),s=l[0],d=s.contentWindow||s.contentDocument.parentWindow;window[a]=i.option.user,d.document.open(),d.document.write(e),d.document.close()},open:function(e){var t=this;if(e=n.extend({},t.option,e),e.tracking){var i=e.tracking;t.track(i.url,i.marketCode,i.partnerCode,i.etag)}t.isOnline?null===t.chatWindow||t.chatWindow.closed?(t.chatWindow=window.open("",d,"height=350,width=482,menubar=no,toolbar=no,location=no,personalbar=no"),t.onlineAgent.startChatWithWindow(t.onlineCandidate,d)):t.chatWindow.focus():e.fallbackLink?window.location.href=e.fallbackLink:window.open(e.offlineLink||f,"contactus"),t.$element.blur()},track:function(e,t,i,o){var a,r,c,l,u;try{a=n.cookie("CMus")||"",r=n.cookie("EFID")||"",l=n.cookie("VMsi")||"",u=n.cookie("newvmsi")||"",c=e+"?cmus="+a+"&guid="+r+"&ctr="+t+"&ptr="+i+"&request="+escape(location.href)+"&referrer="+escape(document.referrer)+"&vmsi="+l+"&etag="+o,"true"===u&&(c+="&newvmsi=true",n.removeCookie("newvmsi"));var s=new Image;s.src=c}catch(d){console.log(d)}}},i.constructor=i,i}),define("livechat-ui/livechat-button-toggle",["jquery","./livechat-button"],function(n,e){function t(n,i,o,a){var r=this;if(!(r instanceof t))return new t(n,i,o,a);var c=e.apply(r,arguments);for(var l in c)c.hasOwnProperty(l)&&(r[l]=c[l]);r.init()}for(var i in e.prototype)t.prototype[i]=e.prototype[i];return t.prototype.init=function(){var n=this;n.bind()},t.prototype.bind=function(){var n=this;n.$element.on("statuschange",function(e,t){n.$element.toggle(t)})},t});